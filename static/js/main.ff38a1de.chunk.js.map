{"version":3,"sources":["images/attention.png","images/logo.svg","actions/index.js","components/Filter/index.js","components/Filter/Filter.jsx","components/Ticket/index.js","components/Ticket/Ticket.jsx","components/TicketsList/index.js","components/TicketsList/TicketsList.jsx","components/ErrorIndicator/index.js","components/ErrorIndicator/ErrorIndicator.jsx","components/Spiner/index.js","components/Spiner/Spiner.jsx","components/App/App.jsx","components/App/index.js","reducer/index.js","index.js"],"names":["module","exports","fetchSearchId","dispatch","a","fetch","response","json","searchId","console","log","type","fetchTickets","status","data","tickets","stop","sortByPrice","error","sortByDuration","allRoutes","noStops","oneStops","twoStops","threeStops","Filter","connect","state","filterStops","actions","props","filteredTicketsList","className","style","fontSize","textAlign","map","item","key","name","checked","isChecked","id","onChange","htmlFor","title","Ticket","word","index","transformDuration","duration","hour","Math","floor","min","ticket","carrier","price","segments","segmentOneWay","segmentToBack","src","alt","origin","destination","stops","length","TicketsList","sortedTickets","loader","checkedList","Set","size","has","ErrorIndicator","attention","width","margin","onClick","window","location","reload","Spiner","App","this","logo","React","Component","reducer","action","sort","b","slice","checkedFilters","filter","newTicketsArr","i","j","sumStops","push","newFilterStops","newNoStops","checkboxes","newOneStops","newTwoStops","newThreeStops","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ff38a1de.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/attention.cb284d33.png\";","module.exports = __webpack_public_path__ + \"static/media/logo.0c089234.svg\";","export const fetchSearchId = () => {\r\n  return async (dispatch) => {\r\n    const response = await fetch('https://front-test.beta.aviasales.ru/search');\r\n    const { searchId } = await response.json();\r\n    console.log('searchId in actions', searchId);\r\n    dispatch({\r\n      type: 'GET_SEARCH_ID',\r\n      searchId\r\n    });\r\n    dispatch(fetchTickets(searchId));\r\n  };\r\n};\r\n\r\n/* export const fetchTickets = (searchId) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: 'TICKETS_FETCH_REQUEST' });\r\n    try {\r\n      const response = await fetch(`https://front-test.beta.aviasales.ru/tickets?searchId=${searchId}`);\r\n      const { tickets, stop } = await response.json();\r\n      // console.log('Tickets -> ', tickets);\r\n      dispatch({\r\n        type: 'TICKETS_FETCH_SUCCESS',\r\n        tickets,\r\n        stop\r\n      });\r\n      dispatch(sortByPrice());\r\n    } catch (err) {\r\n      dispatch({ type: 'TICKETS_FETCH_FAILURE' });\r\n      console.error('Возникда ошибки: ', err);\r\n      throw err;\r\n    };\r\n  };\r\n}; */\r\n\r\nexport const fetchTickets = (searchId) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: 'TICKETS_FETCH_REQUEST' });\r\n    while (true) {\r\n      try {\r\n        const response = await fetch(`https://front-test.beta.aviasales.ru/tickets?searchId=${searchId}`);\r\n        // const { tickets, stop } = await response.json();\r\n        //console.log('Ошибка => ', response.status);\r\n        if (response.status === 500) continue;\r\n        const data = await response.json();\r\n        // console.log('Tickets -> ', tickets);\r\n        dispatch({\r\n          type: 'TICKETS_FETCH_SUCCESS',\r\n          tickets: data.tickets,\r\n          stop: data.stop\r\n        });\r\n        dispatch(sortByPrice());\r\n        if (data.stop) {\r\n          return;\r\n        }\r\n      } catch (err) {\r\n        dispatch({ type: 'TICKETS_FETCH_FAILURE' });\r\n        console.error('Возникда ошибки: ', err);\r\n        throw err;\r\n      };\r\n      \r\n    }\r\n\r\n  };\r\n};\r\n\r\n\r\n\r\n/* Сортировка по цене */\r\nexport const sortByPrice = () => {\r\n  console.log('Click action SortByPrice');\r\n  return { type: 'SORT_BY_PRICE' }\r\n};\r\n\r\n/* Сортировка по времени в пути */\r\nexport const sortByDuration = () => {\r\n  console.log('Click action SortByDuration');\r\n  return { type: 'SORT_BY_DURATION' }\r\n};\r\n\r\n\r\n/* Реакция на фильтры */\r\n\r\n/* export const filteredTicketsList = () => {\r\n  \r\n  console.log('Вызван');\r\n\r\n  return { type: 'FILTERED_TICKETS_LIST' };\r\n}; */\r\n\r\n\r\n\r\n\r\nexport const allRoutes = () => {\r\n  /* const value = event.target.value;\r\n  console.log('value ', value); */\r\n  return { type: 'SELECT_ALL_ROUTES' };\r\n};\r\n\r\nexport const noStops = () => ({\r\n  type: 'SELECT_TICKETS_WITHOUT_STOPS'\r\n});\r\n\r\nexport const oneStops = () => ({\r\n  type: 'SELECT_TICKETS_WITH_ONE_STOPS'\r\n});\r\n\r\n\r\nexport const twoStops = () => ({\r\n  type: 'SELECT_TICKETS_WITH_TWO_STOPS'\r\n});\r\n\r\nexport const threeStops = () => ({\r\n  type: 'SELECT_TICKETS_WITH_THREE_STOPS'\r\n});\r\n\r\n\r\n\r\n\r\n","import Filter from './Filter';\r\n\r\nexport default Filter;","import React from \"react\";\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\n\nimport \"./Filter.scss\";\n\nconst mapStateToProps = (state) => {\n  const { filterStops } = state;\n  return {\n    filterStops\n  };\n};\n\nconst Filter = (props) => {\n\n  const { filterStops, filteredTicketsList, ...actions } = props;\n  // console.log('filterStops - ', filterStops);\n\n  return (\n    <div className=\"col1\">\n      <h6 style={{ fontSize: '12px', textAlign: 'center' }}>КОЛИЧЕСТВО ПЕРЕСАДОК</h6>\n      <form className=\"form\">\n        {\n          filterStops.map(item => {\n            /* console.log(item.name); */\n            return (\n              <div key={item.name}>\n                <input type=\"checkbox\"\n                    checked={item.isChecked}\n                    name={item.name}\n                    id={item.id}\n                    onChange={actions[item.name]}\n                     />\n                  <label htmlFor={item.id}>{item.title}</label>\n              </div>\n            )})\n        }\n      </form>\n    </div>\n  );\n};\n\nexport default connect(mapStateToProps, actions)(Filter);","import Ticket from './Ticket';\r\n\r\nexport default Ticket;","import React from \"react\";\n\nimport \"./Ticket.scss\";\n\nconst Ticket = (props) => {\n\n  const word = (index) => {\n    if (index === 0) {\n      return 'пересадок';\n    } else if (index === 1) {\n      return 'пересадка';\n    } else {\n      return 'пересадки';\n    }\n  }\n\n  const transformDuration = (duration) => {\n    let hour = Math.floor(duration / 60);\n    if (hour < 10) hour = `0${hour}`;\n    let min = duration - hour * 60;\n    if (min < 10) min = `0${min}`;\n    return `${hour}ч ${min}м`;\n  }\n \n\n  const { ticket } = props;\n  // console.log('ticket in TicketForm = ', ticket);\n\n  const { carrier, price, segments } = ticket;\n\n  const [ segmentOneWay, segmentToBack ] = segments;\n  \n  // console.log('segmentOneWay -> ', segmentOneWay);\n  // console.log('segmentToBack -> ', segmentToBack);\n\n  return (\n    <div className=\"ticket-card\">\n      <div className=\"ticket-card--header\">\n        <span>{price} P</span>\n        <img src={`//pics.avs.io/99/36/${carrier}.png`} alt=\"S7 logo\" />\n      </div>\n      <div className=\"information\">\n        <div className=\"rout\">\n          <div className=\"rout-there f-dir\">\n            <span className=\"title-mark\">{segmentOneWay.origin} - {segmentOneWay.destination}</span>\n            <span>10:45 - 08:00</span>\n          </div>\n          <div className=\"rout-back f-dir\">\n            <span className=\"title-mark\">{segmentToBack.origin} - {segmentToBack.destination}</span>\n            <span>11:20 - 00:50</span>\n          </div>\n        </div>\n        <div className=\"intransit\">\n          <div className=\"intransit-there f-dir\">\n            <span className=\"title-mark\">В пути</span>\n            <span>{transformDuration(segmentOneWay.duration)}</span>\n          </div>\n          <div className=\"intransit-back f-dir\">\n            <span className=\"title-mark\">В пути</span>\n            <span>{transformDuration(segmentToBack.duration)}</span>\n          </div>\n        </div>\n        <div className=\"transfer\">\n          <div className=\"transfer-there f-dir\">\n            <span className=\"title-mark\">{segmentOneWay.stops.length} {word(segmentOneWay.stops.length)}</span>\n            <div>\n              { segmentOneWay.stops.length > 0\n                ? segmentOneWay.stops.map((item, index) => <span key={index}>{item} </span>)\n                : <span>-</span>  \n              }\n            </div>\n          </div>\n          <div className=\"transfer-back f-dir\">\n            <span className=\"title-mark\">{segmentToBack.stops.length} {word(segmentToBack.stops.length)}</span>\n            <div>\n              { segmentToBack.stops.length > 0\n                ? segmentToBack.stops.map((item, index) => <span key={index}>{item} </span>)\n                : <span>-</span>  \n              }\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Ticket;\n","import TicketsList from './TicketsList';\r\n\r\nexport default TicketsList;","import React from \"react\";\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\n\nimport Ticket from '../Ticket';\n\nconst mapStateToProps = (state) => {\n  const { fetchTickets, tickets, sortedTickets, searchId, filterStops, loader } = state;\n  return {\n    fetchTickets,\n    /* tickets, */\n    sortedTickets,\n    searchId,\n    filterStops,\n    loader\n  }\n};\n\nconst TicketsList = (props) => {\n\n  const { tickets, sortedTickets, filterStops } = props;\n  const checkedList = new Set(filterStops.map(item => item.isChecked));\n  \n  if (checkedList.size === 1 && checkedList.has(false)) {\n    return (\n      <h2>Не указано количество пересадок!</h2>\n    );\n  };\n\n  // console.log('sortedTickets in TicketsList: ', sortedTickets);\n\n  return (\n    <>\n      {\n        /* sortTickets.map((ticket, index) => <TicketForm ticket={ticket} key={index} />) */\n        sortedTickets.length !== 0 ? sortedTickets.map((ticket, index) => <Ticket ticket={ticket} key={index} />) : <h2>Рейсов, подходящих под заданные фильтры, не найдено~!</h2>\n      }\n    </>\n  );\n};\n\nexport default connect(mapStateToProps, actions)(TicketsList);\n","import ErrorIndicator from './ErrorIndicator';\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\n\r\nimport attention from '../../images/attention.png';\r\n\r\nimport './ErrorIndicator.scss';\r\n\r\nconst ErrorIndicator = () => {\r\n  return (\r\n    <div className=\"card classErrorMessage\">\r\n      <div className=\"card-screen\">\r\n        <div className=\"card-body\" style={{ textAlign: 'center' }}>\r\n          <img className=\"card-img-top\" src={attention} style={{ width: 50, margin: '10px auto'}} alt=\"Error message\" />\r\n          <h2>Что-то пошло не так.</h2>\r\n          <p>Перезапустите страницу.</p>\r\n          <button type='button' onClick={() => window.location.reload()} className='btn btn-warning btn-sm'>Перезапустить</button>\r\n        </div>\r\n      </div>\r\n      <div className=\"myShadow1\"></div>\r\n      <div className=\"myShadow2\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default ErrorIndicator;","import Spiner from './Spiner';\r\n\r\nexport default Spiner;","import React from 'react';\r\n\r\nimport './Spiner.scss';\r\n\r\nconst Spiner = () => {\r\n  return (\r\n    <div className=\"loadingio-spinner-spinner-5wj8y9evdvn\">\r\n      <div className=\"ldio-jrp5avnkwr\">\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spiner;","import React from \"react\";\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\n\nimport Filter from '../Filter';\nimport TicketsList from '../TicketsList';\nimport ErrorIndicator from '../ErrorIndicator';\nimport Spiner from '../Spiner';\n\nimport logo from \"../../images/logo.svg\";\nimport \"./App.scss\";\n\nconst mapStateToProps = (state) => {\n  const { tickets, error, loader, searchId } = state;\n  return {\n    tickets,\n    error,\n    loader,\n    searchId\n  }\n};\n\nclass App extends React.Component {\n  \n  \n/*   sortByPrice = () => {\n    const sortTickets = this.state.data.tickets.sort(function (a, b) {\n      return a.price - b.price;\n    });\n    this.setState({\n      sortTickets,\n      sortButtonsClass: {\n        cheap: 'btn btn-primary btn-lg btn-my',\n        quick: 'btn btn-default btn-lg btn-my'\n      }\n    });\n  } */\n\n/*   sortByDuration = () => {\n    const sortTickets = this.state.data.tickets.sort(function (a, b) {\n      return (a.segments[0].duration + a.segments[1].duration) - (b.segments[0].duration + b.segments[1].duration);\n    });\n    this.setState({\n      sortTickets,\n      sortButtonsClass: {\n        cheap: 'btn btn-default btn-lg btn-my',\n        quick: 'btn btn-primary btn-lg btn-my'\n      }\n    });\n  } */\n\n\n  render() {\n    \n    const { error, loader, sortByPrice, sortByDuration } = this.props;\n    /* const { sortByPrice } = actions; */\n\n    if (error) {\n      return <ErrorIndicator />\n    }\n\n    return (\n      <div>\n        <div className=\"center-logo\">\n          <img className=\"logo-position\" src={logo} alt=\"\" />\n        </div>\n        <div className=\"my-box\">\n          <div className=\"col_1\">\n            <Filter />\n          </div>\n          <div className=\"col_2\">\n            <div className=\"btn-group buttons\">\n              <button type=\"button\" onClick={sortByPrice} className=\"btn btn-primary btn-lg btn-my\">\n                Самый дешевый\n              </button>\n              <button type=\"button\" onClick={sortByDuration} className=\"btn btn-default btn-lg btn-my\">\n                Самый быстрый\n              </button>\n            </div>\n            {\n              loader ? <Spiner /> : <TicketsList />\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default connect(mapStateToProps, actions)(App);\n","import App from './App';\r\n\r\nexport default App;","const reducer = (\r\n  state = {\r\n    filterStops: [\r\n      { id: 1, name: 'allRoutes', title: 'Все', isChecked: true },\r\n      { id: 2, name: 'noStops', stops: 0, title: 'Без пересадок', isChecked: true },\r\n      { id: 3, name: 'oneStops', stops: 1, title: '1 пересадка', isChecked: true },\r\n      { id: 4, name: 'twoStops', stops: 2, title: '2 пересадки', isChecked: true },\r\n      { id: 5, name: 'threeStops', stops: 3, title: '3 пересадки', isChecked: true },    \r\n    ],\r\n    sortedTickets: [],\r\n    tickets: [],\r\n    stop: false,\r\n    error: false,\r\n    loader: false,\r\n    searchId: null,\r\n  },\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case 'GET_SEARCH_ID':\r\n      return { ...state, searchId: action.searchId }\r\n    \r\n    case 'TICKETS_FETCH_REQUEST':\r\n      return { filterStops: state.filterStops, sortedTickets: state.sortedTickets, tickets: state.tickets, stop: state.stop, error: false, loader: true, searchId: state.searchId }\r\n    \r\n    case 'TICKETS_FETCH_SUCCESS':\r\n      return { filterStops: state.filterStops, sortedTickets: state.sortedTickets, tickets: [...state.tickets, ...action.tickets], stop: action.stop, error: false, loader: false, searchId: state.searchId };\r\n    \r\n    case 'TICKETS_FETCH_FAILURE':\r\n      /* return { tickets: [...state.tickets], stop: state.stop, error: true, loader: false, searchId: state.searchId }; */\r\n      return { ...state, error: true, loader: false };\r\n    \r\n    /* Сортировка по цене */\r\n    case 'SORT_BY_PRICE': {\r\n      \r\n      const { tickets } = state;\r\n      const sortedTickets = tickets.sort((a, b) => a.price - b.price).slice(0, 5);\r\n      console.log('sortedTickets by Price in reducer', sortedTickets);\r\n      return { ...state, sortedTickets: sortedTickets };\r\n    }\r\n\r\n    /* Сортировка по времени в пути */\r\n    case 'SORT_BY_DURATION': {\r\n      \r\n      const { tickets } = state;\r\n      const sortedTickets = tickets.sort((a, b) => (a.segments[0].duration + a.segments[1].duration) - (b.segments[0].duration + b.segments[1].duration)).slice(0, 5);\r\n      console.log('sortedTickets by Duration in reducer', sortedTickets);\r\n      return { ...state, sortedTickets: sortedTickets };\r\n    }\r\n\r\n\r\n    case 'FILTERED_TICKETS_LIST': {\r\n      const { filterStops, tickets } = state;\r\n      const checkedFilters = filterStops.filter(item => item.isChecked === 'true');\r\n      let newTicketsArr = [];\r\n      for (let i = 0; i < tickets.length; i += 1) {\r\n        for (let j = 0; j < checkedFilters.length; j += 1) {\r\n          let sumStops = tickets[i].segments[0].stops.length + tickets[i].segments[1].stops.length;\r\n          if (sumStops === checkedFilters[j].stops) {\r\n            newTicketsArr = newTicketsArr.push(tickets[i]);\r\n          }\r\n        }\r\n      }\r\n      \r\n\r\n      console.log('Work Filtered Tickets List: ', checkedFilters);\r\n    }\r\n\r\n\r\n    \r\n    case 'SELECT_ALL_ROUTES': {\r\n      const { filterStops } = state;\r\n      const { isChecked } = filterStops[0];\r\n      const newFilterStops = filterStops.map(item => ({...item, isChecked: !isChecked}));\r\n      return { ...state, filterStops: newFilterStops };\r\n    }\r\n    \r\n    case 'SELECT_TICKETS_WITHOUT_STOPS': {\r\n      const { filterStops } = state;\r\n      const noStops = filterStops[1];\r\n      const newNoStops = { ...noStops, isChecked: !noStops.isChecked};\r\n      const newFilterStops = [filterStops[0], newNoStops, ...filterStops.slice(2)];\r\n      const checkboxes = new Set(newFilterStops.slice(1).map(item => item.isChecked));\r\n      return (checkboxes.size === 1 && checkboxes.has(true)) ? \r\n        { ...state, filterStops: [ {...filterStops[0], isChecked: true}, newNoStops, ...filterStops.slice(2) ] } :\r\n        { ...state, filterStops: [ {...filterStops[0], isChecked: false}, newNoStops, ...filterStops.slice(2) ] };\r\n    }\r\n\r\n    case 'SELECT_TICKETS_WITH_ONE_STOPS': {\r\n      const { filterStops } = state;\r\n      const oneStops = filterStops[2];\r\n      const newOneStops = { ...oneStops, isChecked: !oneStops.isChecked};\r\n      const newFilterStops = [ ...filterStops.slice(0, 2), newOneStops, ...filterStops.slice(3) ];\r\n      const checkboxes = new Set(newFilterStops.slice(1).map(item => item.isChecked));\r\n      return (checkboxes.size === 1 && checkboxes.has(true)) ? \r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: true}, ...filterStops.slice(1, 2), newOneStops, ...filterStops.slice(3) ] } :\r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: false}, ...filterStops.slice(1, 2), newOneStops, ...filterStops.slice(3) ] };\r\n    }\r\n\r\n    case 'SELECT_TICKETS_WITH_TWO_STOPS': {\r\n      const { filterStops } = state;\r\n      const twoStops = filterStops[3];\r\n      const newTwoStops = { ...twoStops, isChecked: !twoStops.isChecked};\r\n      const newFilterStops = [ ...filterStops.slice(0, 3), newTwoStops, filterStops[4] ];\r\n      const checkboxes = new Set(newFilterStops.slice(1).map(item => item.isChecked));\r\n      return (checkboxes.size === 1 && checkboxes.has(true)) ? \r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: true}, ...filterStops.slice(1, 3), newTwoStops, ...filterStops.slice(4) ] } :\r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: false}, ...filterStops.slice(1, 3), newTwoStops, ...filterStops.slice(4) ] };\r\n    }\r\n\r\n    case 'SELECT_TICKETS_WITH_THREE_STOPS': {\r\n      const { filterStops } = state;\r\n      const threeStops = filterStops[4];\r\n      const newThreeStops = { ...threeStops, isChecked: !threeStops.isChecked};\r\n      const newFilterStops = [ ...filterStops.slice(0, 4), newThreeStops ];\r\n      const checkboxes = new Set(newFilterStops.slice(1).map(item => item.isChecked));\r\n      return (checkboxes.size === 1 && checkboxes.has(true)) ? \r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: true}, ...filterStops.slice(1, 4), newThreeStops ] } :\r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: false}, ...filterStops.slice(1, 4), newThreeStops ] };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  };\r\n};\r\n\r\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\n\nimport App from './components/App';\nimport reducer from './reducer';\nimport { fetchSearchId } from './actions';\n\nimport './index.scss';\n\n/* const initialStateFilters = [\n  { id: 1, name: 'allRoutes', title: 'Все', isChecked: true },\n  { id: 2, name: 'noStops', stops: 0, title: 'Без пересадок', isChecked: true },\n  { id: 3, name: 'oneStops', stops: 1, title: '1 пересадка', isChecked: true },\n  { id: 4, name: 'twoStops', stops: 2, title: '2 пересадки', isChecked: true },\n  { id: 5, name: 'threeStops', stops: 3, title: '3 пересадки', isChecked: true },    \n]; */\n\n\n/* const store = createStore(reducer, initialStateFilters); */\nconst store = createStore(reducer, applyMiddleware(thunk));\n\nstore.dispatch(fetchSearchId());\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}