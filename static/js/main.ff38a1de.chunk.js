(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/attention.cb284d33.png"},19:function(e,t,a){e.exports=a.p+"static/media/logo.0c089234.svg"},24:function(e,t,a){e.exports=a(42)},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var c={};a.r(c),a.d(c,"fetchSearchId",(function(){return O})),a.d(c,"fetchTickets",(function(){return S})),a.d(c,"sortByPrice",(function(){return T})),a.d(c,"sortByDuration",(function(){return k})),a.d(c,"allRoutes",(function(){return j})),a.d(c,"noStops",(function(){return v})),a.d(c,"oneStops",(function(){return C})),a.d(c,"twoStops",(function(){return _})),a.d(c,"threeStops",(function(){return g}));var n=a(0),r=a.n(n),s=a(7),i=a.n(s),l=a(4),o=a(3),u=a(15),d=a(16),m=a(17),p=a(22),E=a(20),b=a(6),f=a.n(b),h=a(12),O=function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){var a,c,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:return a=e.sent,e.next=5,a.json();case 5:c=e.sent,n=c.searchId,console.log("searchId in actions",n),t({type:"GET_SEARCH_ID",searchId:n}),t(S(n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var c,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"TICKETS_FETCH_REQUEST"});case 1:return t.prev=2,t.next=5,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 5:if(500!==(c=t.sent).status){t.next=8;break}return t.abrupt("continue",1);case 8:return t.next=10,c.json();case 10:if(n=t.sent,a({type:"TICKETS_FETCH_SUCCESS",tickets:n.tickets,stop:n.stop}),a(T()),!n.stop){t.next=15;break}return t.abrupt("return");case 15:t.next=22;break;case 17:throw t.prev=17,t.t0=t.catch(2),a({type:"TICKETS_FETCH_FAILURE"}),console.error("\u0412\u043e\u0437\u043d\u0438\u043a\u0434\u0430 \u043e\u0448\u0438\u0431\u043a\u0438: ",t.t0),t.t0;case 22:t.next=1;break;case 25:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}()},T=function(){return console.log("Click action SortByPrice"),{type:"SORT_BY_PRICE"}},k=function(){return console.log("Click action SortByDuration"),{type:"SORT_BY_DURATION"}},j=function(){return{type:"SELECT_ALL_ROUTES"}},v=function(){return{type:"SELECT_TICKETS_WITHOUT_STOPS"}},C=function(){return{type:"SELECT_TICKETS_WITH_ONE_STOPS"}},_=function(){return{type:"SELECT_TICKETS_WITH_TWO_STOPS"}},g=function(){return{type:"SELECT_TICKETS_WITH_THREE_STOPS"}},I=a(23),y=(a(36),Object(o.b)((function(e){return{filterStops:e.filterStops}}),c)((function(e){var t=e.filterStops,a=(e.filteredTicketsList,Object(I.a)(e,["filterStops","filteredTicketsList"]));return r.a.createElement("div",{className:"col1"},r.a.createElement("h6",{style:{fontSize:"12px",textAlign:"center"}},"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"),r.a.createElement("form",{className:"form"},t.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("input",{type:"checkbox",checked:e.isChecked,name:e.name,id:e.id,onChange:a[e.name]}),r.a.createElement("label",{htmlFor:e.id},e.title))}))))}))),N=a(21),w=(a(37),function(e){var t=function(e){return 0===e?"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":1===e?"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},a=function(e){var t=Math.floor(e/60);t<10&&(t="0".concat(t));var a=e-60*t;return a<10&&(a="0".concat(a)),"".concat(t,"\u0447 ").concat(a,"\u043c")},c=e.ticket,n=c.carrier,s=c.price,i=c.segments,l=Object(N.a)(i,2),o=l[0],u=l[1];return r.a.createElement("div",{className:"ticket-card"},r.a.createElement("div",{className:"ticket-card--header"},r.a.createElement("span",null,s," P"),r.a.createElement("img",{src:"//pics.avs.io/99/36/".concat(n,".png"),alt:"S7 logo"})),r.a.createElement("div",{className:"information"},r.a.createElement("div",{className:"rout"},r.a.createElement("div",{className:"rout-there f-dir"},r.a.createElement("span",{className:"title-mark"},o.origin," - ",o.destination),r.a.createElement("span",null,"10:45 - 08:00")),r.a.createElement("div",{className:"rout-back f-dir"},r.a.createElement("span",{className:"title-mark"},u.origin," - ",u.destination),r.a.createElement("span",null,"11:20 - 00:50"))),r.a.createElement("div",{className:"intransit"},r.a.createElement("div",{className:"intransit-there f-dir"},r.a.createElement("span",{className:"title-mark"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",null,a(o.duration))),r.a.createElement("div",{className:"intransit-back f-dir"},r.a.createElement("span",{className:"title-mark"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",null,a(u.duration)))),r.a.createElement("div",{className:"transfer"},r.a.createElement("div",{className:"transfer-there f-dir"},r.a.createElement("span",{className:"title-mark"},o.stops.length," ",t(o.stops.length)),r.a.createElement("div",null,o.stops.length>0?o.stops.map((function(e,t){return r.a.createElement("span",{key:t},e," ")})):r.a.createElement("span",null,"-"))),r.a.createElement("div",{className:"transfer-back f-dir"},r.a.createElement("span",{className:"title-mark"},u.stops.length," ",t(u.stops.length)),r.a.createElement("div",null,u.stops.length>0?u.stops.map((function(e,t){return r.a.createElement("span",{key:t},e," ")})):r.a.createElement("span",null,"-"))))))}),L=Object(o.b)((function(e){var t=e.fetchTickets;e.tickets;return{fetchTickets:t,sortedTickets:e.sortedTickets,searchId:e.searchId,filterStops:e.filterStops,loader:e.loader}}),c)((function(e){e.tickets;var t=e.sortedTickets,a=e.filterStops,c=new Set(a.map((function(e){return e.isChecked})));return 1===c.size&&c.has(!1)?r.a.createElement("h2",null,"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a!"):r.a.createElement(r.a.Fragment,null,0!==t.length?t.map((function(e,t){return r.a.createElement(w,{ticket:e,key:t})})):r.a.createElement("h2",null,"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e~!"))})),R=a(18),x=a.n(R),H=(a(38),function(){return r.a.createElement("div",{className:"card classErrorMessage"},r.a.createElement("div",{className:"card-screen"},r.a.createElement("div",{className:"card-body",style:{textAlign:"center"}},r.a.createElement("img",{className:"card-img-top",src:x.a,style:{width:50,margin:"10px auto"},alt:"Error message"}),r.a.createElement("h2",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a."),r.a.createElement("p",null,"\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u0435 \u0441\u0442\u0440\u0430\u043d\u0438\u0446\u0443."),r.a.createElement("button",{type:"button",onClick:function(){return window.location.reload()},className:"btn btn-warning btn-sm"},"\u041f\u0435\u0440\u0435\u0437\u0430\u043f\u0443\u0441\u0442\u0438\u0442\u044c"))),r.a.createElement("div",{className:"myShadow1"}),r.a.createElement("div",{className:"myShadow2"}))}),K=(a(39),function(){return r.a.createElement("div",{className:"loadingio-spinner-spinner-5wj8y9evdvn"},r.a.createElement("div",{className:"ldio-jrp5avnkwr"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),P=a(19),F=a.n(P),U=(a(40),function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"render",value:function(){var e=this.props,t=e.error,a=e.loader,c=e.sortByPrice,n=e.sortByDuration;return t?r.a.createElement(H,null):r.a.createElement("div",null,r.a.createElement("div",{className:"center-logo"},r.a.createElement("img",{className:"logo-position",src:F.a,alt:""})),r.a.createElement("div",{className:"my-box"},r.a.createElement("div",{className:"col_1"},r.a.createElement(y,null)),r.a.createElement("div",{className:"col_2"},r.a.createElement("div",{className:"btn-group buttons"},r.a.createElement("button",{type:"button",onClick:c,className:"btn btn-primary btn-lg btn-my"},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"),r.a.createElement("button",{type:"button",onClick:n,className:"btn btn-default btn-lg btn-my"},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439")),a?r.a.createElement(K,null):r.a.createElement(L,null))))}}]),a}(r.a.Component)),B=Object(o.b)((function(e){return{tickets:e.tickets,error:e.error,loader:e.loader,searchId:e.searchId}}),c)(U),W=a(2),A=a(1),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filterStops:[{id:1,name:"allRoutes",title:"\u0412\u0441\u0435",isChecked:!0},{id:2,name:"noStops",stops:0,title:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",isChecked:!0},{id:3,name:"oneStops",stops:1,title:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",isChecked:!0},{id:4,name:"twoStops",stops:2,title:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",isChecked:!0},{id:5,name:"threeStops",stops:3,title:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",isChecked:!0}],sortedTickets:[],tickets:[],stop:!1,error:!1,loader:!1,searchId:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SEARCH_ID":return Object(A.a)(Object(A.a)({},e),{},{searchId:t.searchId});case"TICKETS_FETCH_REQUEST":return{filterStops:e.filterStops,sortedTickets:e.sortedTickets,tickets:e.tickets,stop:e.stop,error:!1,loader:!0,searchId:e.searchId};case"TICKETS_FETCH_SUCCESS":return{filterStops:e.filterStops,sortedTickets:e.sortedTickets,tickets:[].concat(Object(W.a)(e.tickets),Object(W.a)(t.tickets)),stop:t.stop,error:!1,loader:!1,searchId:e.searchId};case"TICKETS_FETCH_FAILURE":return Object(A.a)(Object(A.a)({},e),{},{error:!0,loader:!1});case"SORT_BY_PRICE":var a=e.tickets,c=a.sort((function(e,t){return e.price-t.price})).slice(0,5);return console.log("sortedTickets by Price in reducer",c),Object(A.a)(Object(A.a)({},e),{},{sortedTickets:c});case"SORT_BY_DURATION":var n=e.tickets,r=n.sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)})).slice(0,5);return console.log("sortedTickets by Duration in reducer",r),Object(A.a)(Object(A.a)({},e),{},{sortedTickets:r});case"FILTERED_TICKETS_LIST":for(var s=e.filterStops,i=e.tickets,l=s.filter((function(e){return"true"===e.isChecked})),o=[],u=0;u<i.length;u+=1)for(var d=0;d<l.length;d+=1){var m=i[u].segments[0].stops.length+i[u].segments[1].stops.length;m===l[d].stops&&(o=o.push(i[u]))}console.log("Work Filtered Tickets List: ",l);case"SELECT_ALL_ROUTES":var p=e.filterStops,E=p[0].isChecked,b=p.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{isChecked:!E})}));return Object(A.a)(Object(A.a)({},e),{},{filterStops:b});case"SELECT_TICKETS_WITHOUT_STOPS":var f=e.filterStops,h=f[1],O=Object(A.a)(Object(A.a)({},h),{},{isChecked:!h.isChecked}),S=[f[0],O].concat(Object(W.a)(f.slice(2))),T=new Set(S.slice(1).map((function(e){return e.isChecked})));return 1===T.size&&T.has(!0)?Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},f[0]),{},{isChecked:!0}),O].concat(Object(W.a)(f.slice(2)))}):Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},f[0]),{},{isChecked:!1}),O].concat(Object(W.a)(f.slice(2)))});case"SELECT_TICKETS_WITH_ONE_STOPS":var k=e.filterStops,j=k[2],v=Object(A.a)(Object(A.a)({},j),{},{isChecked:!j.isChecked}),C=[].concat(Object(W.a)(k.slice(0,2)),[v],Object(W.a)(k.slice(3))),_=new Set(C.slice(1).map((function(e){return e.isChecked})));return 1===_.size&&_.has(!0)?Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},k[0]),{},{isChecked:!0})].concat(Object(W.a)(k.slice(1,2)),[v],Object(W.a)(k.slice(3)))}):Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},k[0]),{},{isChecked:!1})].concat(Object(W.a)(k.slice(1,2)),[v],Object(W.a)(k.slice(3)))});case"SELECT_TICKETS_WITH_TWO_STOPS":var g=e.filterStops,I=g[3],y=Object(A.a)(Object(A.a)({},I),{},{isChecked:!I.isChecked}),N=[].concat(Object(W.a)(g.slice(0,3)),[y,g[4]]),w=new Set(N.slice(1).map((function(e){return e.isChecked})));return 1===w.size&&w.has(!0)?Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},g[0]),{},{isChecked:!0})].concat(Object(W.a)(g.slice(1,3)),[y],Object(W.a)(g.slice(4)))}):Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},g[0]),{},{isChecked:!1})].concat(Object(W.a)(g.slice(1,3)),[y],Object(W.a)(g.slice(4)))});case"SELECT_TICKETS_WITH_THREE_STOPS":var L=e.filterStops,R=L[4],x=Object(A.a)(Object(A.a)({},R),{},{isChecked:!R.isChecked}),H=[].concat(Object(W.a)(L.slice(0,4)),[x]),K=new Set(H.slice(1).map((function(e){return e.isChecked})));return 1===K.size&&K.has(!0)?Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},L[0]),{},{isChecked:!0})].concat(Object(W.a)(L.slice(1,4)),[x])}):Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},L[0]),{},{isChecked:!1})].concat(Object(W.a)(L.slice(1,4)),[x])});default:return e}},z=(a(41),Object(l.c)(D,Object(l.a)(u.a)));z.dispatch(O()),i.a.render(r.a.createElement(o.a,{store:z},r.a.createElement(B,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.ff38a1de.chunk.js.map