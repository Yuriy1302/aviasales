(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/attention.cb284d33.png"},20:function(e,t,a){e.exports=a.p+"static/media/logo.0c089234.svg"},25:function(e,t,a){e.exports=a(43)},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var c={};a.r(c),a.d(c,"fetchSearchId",(function(){return O})),a.d(c,"fetchTickets",(function(){return S})),a.d(c,"sortByPrice",(function(){return j})),a.d(c,"sortByDuration",(function(){return k})),a.d(c,"allRoutes",(function(){return T})),a.d(c,"noStops",(function(){return v})),a.d(c,"oneStops",(function(){return C})),a.d(c,"twoStops",(function(){return _})),a.d(c,"threeStops",(function(){return g}));var n=a(0),r=a.n(n),s=a(8),i=a.n(s),l=a(5),o=a(3),u=a(16),m=a(17),d=a(18),p=a(23),E=a(21),b=a(7),f=a.n(b),h=a(13),O=function(){return function(){var e=Object(h.a)(f.a.mark((function e(t){var a,c,n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:return a=e.sent,e.next=5,a.json();case 5:c=e.sent,n=c.searchId,console.log("searchId in actions",n),t({type:"GET_SEARCH_ID",searchId:n}),t(S(n));case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},S=function(e){return function(){var t=Object(h.a)(f.a.mark((function t(a){var c,n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:"TICKETS_FETCH_REQUEST"});case 1:return t.prev=2,t.next=5,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(e));case 5:return c=t.sent,t.next=8,c.json();case 8:if(n=t.sent,a({type:"TICKETS_FETCH_SUCCESS",tickets:n.tickets,stop:n.stop}),!n.stop){t.next=12;break}return t.abrupt("return");case 12:t.next=19;break;case 14:throw t.prev=14,t.t0=t.catch(2),a({type:"TICKETS_FETCH_FAILURE"}),console.error("\u0412\u043e\u0437\u043d\u0438\u043a\u0434\u0430 \u043e\u0448\u0438\u0431\u043a\u0438: ",t.t0),t.t0;case 19:t.next=1;break;case 22:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}()},j=function(e){return console.log("Click action SortByPrice"),{type:"SORT_BY_PRICE"}},k=function(e){return console.log("Click action SortByDuration"),{type:"SORT_BY_DURATION"}},T=function(){return{type:"SELECT_ALL_ROUTES"}},v=function(){return{type:"SELECT_TICKETS_WITHOUT_STOPS"}},C=function(){return{type:"SELECT_TICKETS_WITH_ONE_STOPS"}},_=function(){return{type:"SELECT_TICKETS_WITH_TWO_STOPS"}},g=function(){return{type:"SELECT_TICKETS_WITH_THREE_STOPS"}},I=a(24),y=(a(37),Object(o.b)((function(e){return{filterStops:e.filterStops}}),c)((function(e){var t=e.filterStops,a=(e.filteredTicketsList,Object(I.a)(e,["filterStops","filteredTicketsList"]));return r.a.createElement("div",{className:"col1"},r.a.createElement("h6",{style:{fontSize:"12px",textAlign:"center"}},"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"),r.a.createElement("form",{className:"form"},t.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("input",{type:"checkbox",checked:e.isChecked,name:e.name,id:e.id,onChange:a[e.name]}),r.a.createElement("label",{htmlFor:e.id},e.title))}))))}))),N=a(4),w=a(19),R=a.n(w),x=(a(38),Object(o.b)((function(e){return{searchId:e.searchId}}),{fetchTickets:S})((function(e){var t=e.searchId,a=e.fetchTickets;return r.a.createElement("div",{className:"card classErrorMessage"},r.a.createElement("div",{className:"card-screen"},r.a.createElement("div",{className:"card-body",style:{textAlign:"center"}},r.a.createElement("img",{className:"card-img-top",src:R.a,style:{width:50,margin:"10px auto"},alt:"Error message"}),r.a.createElement("h2",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a."),r.a.createElement("p",null,"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u043e\u0438\u0441\u043a?"),r.a.createElement("button",{type:"button",onClick:function(){return a(t)},className:"btn btn-warning btn-sm"},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))),r.a.createElement("div",{className:"myShadow1"}),r.a.createElement("div",{className:"myShadow2"}))}))),H=a(22),L=(a(39),function(e){var t=function(e){return 0===e?"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":1===e?"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},a=function(e){var t=Math.floor(e/60);t<10&&(t="0".concat(t));var a=e-60*t;return a<10&&(a="0".concat(a)),"".concat(t,"\u0447 ").concat(a,"\u043c")},c=e.ticket,n=c.carrier,s=c.price,i=c.segments,l=Object(H.a)(i,2),o=l[0],u=l[1];return r.a.createElement("div",{className:"ticket-card"},r.a.createElement("div",{className:"ticket-card--header"},r.a.createElement("span",null,s," P"),r.a.createElement("img",{src:"//pics.avs.io/99/36/".concat(n,".png"),alt:"S7 logo"})),r.a.createElement("div",{className:"information"},r.a.createElement("div",{className:"rout"},r.a.createElement("div",{className:"rout-there f-dir"},r.a.createElement("span",{className:"title-mark"},o.origin," - ",o.destination),r.a.createElement("span",null,"10:45 - 08:00")),r.a.createElement("div",{className:"rout-back f-dir"},r.a.createElement("span",{className:"title-mark"},u.origin," - ",u.destination),r.a.createElement("span",null,"11:20 - 00:50"))),r.a.createElement("div",{className:"intransit"},r.a.createElement("div",{className:"intransit-there f-dir"},r.a.createElement("span",{className:"title-mark"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",null,a(o.duration))),r.a.createElement("div",{className:"intransit-back f-dir"},r.a.createElement("span",{className:"title-mark"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",null,a(u.duration)))),r.a.createElement("div",{className:"transfer"},r.a.createElement("div",{className:"transfer-there f-dir"},r.a.createElement("span",{className:"title-mark"},o.stops.length," ",t(o.stops.length)),r.a.createElement("div",null,o.stops.length>0?o.stops.map((function(e,t){return r.a.createElement("span",{key:t},e," ")})):r.a.createElement("span",null,"-"))),r.a.createElement("div",{className:"transfer-back f-dir"},r.a.createElement("span",{className:"title-mark"},u.stops.length," ",t(u.stops.length)),r.a.createElement("div",null,u.stops.length>0?u.stops.map((function(e,t){return r.a.createElement("span",{key:t},e," ")})):r.a.createElement("span",null,"-"))))))}),P=Object(o.b)((function(e){var t,a=e.filterStops,c=e.fetchTickets,n=e.tickets,r=e.searchId,s=e.loader,i=e.error,l=e.cheap;return t={filterStops:a,fetchTickets:c,tickets:n,searchId:r},Object(N.a)(t,"filterStops",a),Object(N.a)(t,"loader",s),Object(N.a)(t,"error",i),Object(N.a)(t,"cheap",l),t}),c)((function(e){var t=e.tickets,a=e.filterStops,c=e.error,n=e.cheap;if(c)return r.a.createElement(x,null);var s=new Set(a.map((function(e){return e.isChecked})));if(1===s.size&&s.has(!1))return r.a.createElement("h2",null,"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a!");var i=[],l=a.slice(1).filter((function(e){return e.isChecked})).map((function(e){return e.stops}));return i=n?t.filter((function(e){var t=e.segments[0].stops.length+e.segments[1].stops.length;if(l.includes(t))return e})).sort((function(e,t){return e.price-t.price})).slice(0,5):t.filter((function(e){var t=e.segments[0].stops.length+e.segments[1].stops.length;if(l.includes(t))return e})).sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)})).slice(0,5),r.a.createElement(r.a.Fragment,null,0!==i.length?i.map((function(e,t){return r.a.createElement(L,{ticket:e,key:t})})):r.a.createElement("h2",null,"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e~!"))})),K=(a(40),function(){return r.a.createElement("div",{className:"loadingio-spinner-spinner-5wj8y9evdvn"},r.a.createElement("div",{className:"ldio-jrp5avnkwr"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),U=a(20),B=a.n(U),A=(a(41),function(e){Object(p.a)(a,e);var t=Object(E.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){var e=this.props,t=(e.error,e.loader),a=(e.tickets,e.sortByPrice),c=e.sortByDuration,n="btn btn-primary btn-lg btn-my",s="btn btn-default btn-lg btn-my";return e.cheap||(n="btn btn-default btn-lg btn-my",s="btn btn-primary btn-lg btn-my"),r.a.createElement("div",null,r.a.createElement("div",{className:"center-logo"},r.a.createElement("img",{className:"logo-position",src:B.a,alt:""})),r.a.createElement("div",{className:"my-box"},r.a.createElement("div",{className:"col_1"},r.a.createElement(y,null)),r.a.createElement("div",{className:"col_2"},r.a.createElement("div",{className:"btn-group buttons"},r.a.createElement("button",{type:"button",onClick:a,className:n},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"),r.a.createElement("button",{type:"button",onClick:c,className:s},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439")),t?r.a.createElement(K,null):r.a.createElement(P,null))))}}]),a}(r.a.Component)),F=Object(o.b)((function(e){return{tickets:e.tickets,error:e.error,loader:e.loader,searchId:e.searchId,cheap:e.cheap}}),c)(A),W=a(2),D=a(1),z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filterStops:[{id:1,name:"allRoutes",title:"\u0412\u0441\u0435",isChecked:!0},{id:2,name:"noStops",stops:0,title:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",isChecked:!0},{id:3,name:"oneStops",stops:1,title:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",isChecked:!0},{id:4,name:"twoStops",stops:2,title:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",isChecked:!0},{id:5,name:"threeStops",stops:3,title:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",isChecked:!0}],sortedTickets:[],tickets:[],stop:!1,error:!1,loader:!1,searchId:null,cheap:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SEARCH_ID":return Object(D.a)(Object(D.a)({},e),{},{searchId:t.searchId});case"TICKETS_FETCH_REQUEST":return{filterStops:e.filterStops,sortedTickets:e.sortedTickets,tickets:e.tickets,stop:e.stop,error:!1,loader:!0,searchId:e.searchId,cheap:e.cheap};case"TICKETS_FETCH_SUCCESS":return{filterStops:e.filterStops,sortedTickets:e.sortedTickets,tickets:[].concat(Object(W.a)(e.tickets),Object(W.a)(t.tickets)),stop:t.stop,error:!1,loader:!1,searchId:e.searchId,cheap:e.cheap};case"TICKETS_FETCH_FAILURE":return Object(D.a)(Object(D.a)({},e),{},{error:!0,loader:!1});case"SORT_BY_PRICE":return console.log("sortedTickets by Price in reducer",t.payload),Object(D.a)(Object(D.a)({},e),{},{cheap:!0});case"SORT_BY_DURATION":return console.log("sortedTickets by Duration in reducer",t.payload),Object(D.a)(Object(D.a)({},e),{},{cheap:!1});case"SELECT_ALL_ROUTES":var a=e.filterStops,c=a[0].isChecked,n=a.map((function(e){return Object(D.a)(Object(D.a)({},e),{},{isChecked:!c})}));return Object(D.a)(Object(D.a)({},e),{},{filterStops:n});case"SELECT_TICKETS_WITHOUT_STOPS":var r=e.filterStops,s=r[1],i=Object(D.a)(Object(D.a)({},s),{},{isChecked:!s.isChecked}),l=[r[0],i].concat(Object(W.a)(r.slice(2))),o=new Set(l.slice(1).map((function(e){return e.isChecked})));return 1===o.size&&o.has(!0)?Object(D.a)(Object(D.a)({},e),{},{filterStops:[Object(D.a)(Object(D.a)({},r[0]),{},{isChecked:!0}),i].concat(Object(W.a)(r.slice(2)))}):Object(D.a)(Object(D.a)({},e),{},{filterStops:[Object(D.a)(Object(D.a)({},r[0]),{},{isChecked:!1}),i].concat(Object(W.a)(r.slice(2)))});case"SELECT_TICKETS_WITH_ONE_STOPS":var u=e.filterStops,m=u[2],d=Object(D.a)(Object(D.a)({},m),{},{isChecked:!m.isChecked}),p=[].concat(Object(W.a)(u.slice(0,2)),[d],Object(W.a)(u.slice(3))),E=new Set(p.slice(1).map((function(e){return e.isChecked})));return 1===E.size&&E.has(!0)?Object(D.a)(Object(D.a)({},e),{},{filterStops:[Object(D.a)(Object(D.a)({},u[0]),{},{isChecked:!0})].concat(Object(W.a)(u.slice(1,2)),[d],Object(W.a)(u.slice(3)))}):Object(D.a)(Object(D.a)({},e),{},{filterStops:[Object(D.a)(Object(D.a)({},u[0]),{},{isChecked:!1})].concat(Object(W.a)(u.slice(1,2)),[d],Object(W.a)(u.slice(3)))});case"SELECT_TICKETS_WITH_TWO_STOPS":var b=e.filterStops,f=b[3],h=Object(D.a)(Object(D.a)({},f),{},{isChecked:!f.isChecked}),O=[].concat(Object(W.a)(b.slice(0,3)),[h,b[4]]),S=new Set(O.slice(1).map((function(e){return e.isChecked})));return 1===S.size&&S.has(!0)?Object(D.a)(Object(D.a)({},e),{},{filterStops:[Object(D.a)(Object(D.a)({},b[0]),{},{isChecked:!0})].concat(Object(W.a)(b.slice(1,3)),[h],Object(W.a)(b.slice(4)))}):Object(D.a)(Object(D.a)({},e),{},{filterStops:[Object(D.a)(Object(D.a)({},b[0]),{},{isChecked:!1})].concat(Object(W.a)(b.slice(1,3)),[h],Object(W.a)(b.slice(4)))});case"SELECT_TICKETS_WITH_THREE_STOPS":var j=e.filterStops,k=j[4],T=Object(D.a)(Object(D.a)({},k),{},{isChecked:!k.isChecked}),v=[].concat(Object(W.a)(j.slice(0,4)),[T]),C=new Set(v.slice(1).map((function(e){return e.isChecked})));return 1===C.size&&C.has(!0)?Object(D.a)(Object(D.a)({},e),{},{filterStops:[Object(D.a)(Object(D.a)({},j[0]),{},{isChecked:!0})].concat(Object(W.a)(j.slice(1,4)),[T])}):Object(D.a)(Object(D.a)({},e),{},{filterStops:[Object(D.a)(Object(D.a)({},j[0]),{},{isChecked:!1})].concat(Object(W.a)(j.slice(1,4)),[T])});default:return e}},Y=(a(42),Object(l.c)(z,Object(l.a)(u.a)));Y.dispatch(O()),i.a.render(r.a.createElement(o.a,{store:Y},r.a.createElement(F,null)),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.de4e1a59.chunk.js.map