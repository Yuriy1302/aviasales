{"version":3,"sources":["images/attention.png","images/logo.svg","actions/index.js","components/Filter/index.js","components/Filter/Filter.jsx","components/ErrorIndicator/index.js","components/ErrorIndicator/ErrorIndicator.jsx","components/Ticket/index.js","components/Ticket/Ticket.jsx","components/TicketsList/index.js","components/TicketsList/TicketsList.jsx","components/Spiner/index.js","components/Spiner/Spiner.jsx","components/App/App.jsx","components/App/index.js","reducer/index.js","index.js"],"names":["module","exports","fetchSearchId","dispatch","a","fetch","response","json","searchId","console","log","type","fetchTickets","data","tickets","stop","error","sortByPrice","sortByDuration","allRoutes","noStops","oneStops","twoStops","threeStops","Filter","connect","state","filterStops","actions","props","filteredTicketsList","className","style","fontSize","textAlign","map","item","key","name","checked","isChecked","id","onChange","htmlFor","title","ErrorIndicator","src","attention","width","margin","alt","onClick","Ticket","word","index","transformDuration","duration","hour","Math","floor","min","ticket","carrier","price","segments","segmentOneWay","segmentToBack","origin","destination","stops","length","TicketsList","loader","cheap","checkedList","Set","size","has","sortedTickets","checkedFilters","slice","filter","includes","sort","b","Spiner","App","this","btnCheap","btnQuick","logo","React","Component","reducer","action","payload","newFilterStops","newNoStops","checkboxes","newOneStops","newTwoStops","newThreeStops","store","createStore","applyMiddleware","thunk","ReactDOM","render","document","getElementById"],"mappings":"0FAAAA,EAAOC,QAAU,IAA0B,uC,mBCA3CD,EAAOC,QAAU,IAA0B,kC,gtBCA9BC,EAAgB,WAC3B,8CAAO,WAAOC,GAAP,mBAAAC,EAAA,sEACkBC,MAAM,+CADxB,cACCC,EADD,gBAEsBA,EAASC,OAF/B,gBAEGC,EAFH,EAEGA,SACRC,QAAQC,IAAI,sBAAuBF,GACnCL,EAAS,CACPQ,KAAM,gBACNH,aAEFL,EAASS,EAAaJ,IARjB,4CAAP,uDAiCWI,EAAe,SAACJ,GAC3B,8CAAO,WAAOL,GAAP,iBAAAC,EAAA,sDACLD,EAAS,CAAEQ,KAAM,0BADZ,gCAIsBN,MAAM,yDAAD,OAA0DG,IAJrF,cAIKF,EAJL,gBAUkBA,EAASC,OAV3B,UAUKM,EAVL,OAYDV,EAAS,CACPQ,KAAM,wBACNG,QAASD,EAAKC,QACdC,KAAMF,EAAKE,QAGTF,EAAKE,KAlBR,2GAsBDZ,EAAS,CAAEQ,KAAM,0BACjBF,QAAQO,MAAM,0FAAd,MAvBC,sFAAP,uDAmCWC,EAAc,SAACH,GAG1B,OAFAL,QAAQC,IAAI,4BAEL,CACLC,KAAM,kBAMGO,EAAiB,SAACJ,GAG7B,OAFAL,QAAQC,IAAI,+BAEL,CACLC,KAAM,qBAkBGQ,EAAY,WAGvB,MAAO,CAAER,KAAM,sBAGJS,EAAU,iBAAO,CAC5BT,KAAM,iCAGKU,EAAW,iBAAO,CAC7BV,KAAM,kCAIKW,EAAW,iBAAO,CAC7BX,KAAM,kCAGKY,EAAa,iBAAO,CAC/BZ,KAAM,oC,QCxHOa,G,MCwCAC,aApCS,SAACC,GAEvB,MAAO,CACLC,YAFsBD,EAAhBC,eAmC8BC,EAAzBH,EA7BA,SAACI,GAAW,IAEjBF,EAAiDE,EAAjDF,YAAqCC,GAAYC,EAApCC,oBAFG,YAEiCD,EAFjC,wCAKxB,OACE,yBAAKE,UAAU,QACb,wBAAIC,MAAO,CAAEC,SAAU,OAAQC,UAAW,WAA1C,uHACA,0BAAMH,UAAU,QAEZJ,EAAYQ,KAAI,SAAAC,GAEd,OACE,yBAAKC,IAAKD,EAAKE,MACb,2BAAO3B,KAAK,WACR4B,QAASH,EAAKI,UACdF,KAAMF,EAAKE,KACXG,GAAIL,EAAKK,GACTC,SAAUd,EAAQQ,EAAKE,QAEzB,2BAAOK,QAASP,EAAKK,IAAKL,EAAKQ,iB,wBC/BlCC,G,MC6BApB,aAvBS,SAACC,GAEvB,MAAO,CAAElB,SADYkB,EAAblB,YAsB8B,CAAEI,gBAA3Ba,EAlBQ,SAACI,GAAW,IACzBrB,EAA4BqB,EAA5BrB,SAAWI,EAAiBiB,EAAjBjB,aACnB,OACE,yBAAKmB,UAAU,0BACb,yBAAKA,UAAU,eACb,yBAAKA,UAAU,YAAYC,MAAO,CAAEE,UAAW,WAC7C,yBAAKH,UAAU,eAAee,IAAKC,IAAWf,MAAO,CAAEgB,MAAO,GAAIC,OAAQ,aAAcC,IAAI,kBAC5F,+HACA,2HACA,4BAAQvC,KAAK,SAASwC,QAAS,kBAAMvC,EAAaJ,IAAWuB,UAAU,0BAAvE,kEAGJ,yBAAKA,UAAU,cACf,yBAAKA,UAAU,mB,QCxBNqB,G,MCEA,SAACvB,GAEd,IAAMwB,EAAO,SAACC,GACZ,OAAc,IAAVA,EACK,yDACY,IAAVA,EACF,yDAEA,0DAILC,EAAoB,SAACC,GACzB,IAAIC,EAAOC,KAAKC,MAAMH,EAAW,IAC7BC,EAAO,KAAIA,EAAI,WAAOA,IAC1B,IAAIG,EAAMJ,EAAkB,GAAPC,EAErB,OADIG,EAAM,KAAIA,EAAG,WAAOA,IAClB,GAAN,OAAUH,EAAV,kBAAmBG,EAAnB,WAIMC,EAAWhC,EAAXgC,OAGAC,EAA6BD,EAA7BC,QAASC,EAAoBF,EAApBE,MAAOC,EAAaH,EAAbG,SAxBA,cA0BiBA,EA1BjB,GA0BhBC,EA1BgB,KA0BDC,EA1BC,KA+BxB,OACE,yBAAKnC,UAAU,eACb,yBAAKA,UAAU,uBACb,8BAAOgC,EAAP,MACA,yBAAKjB,IAAG,8BAAyBgB,EAAzB,QAAwCZ,IAAI,aAEtD,yBAAKnB,UAAU,eACb,yBAAKA,UAAU,QACb,yBAAKA,UAAU,oBACb,0BAAMA,UAAU,cAAckC,EAAcE,OAA5C,MAAuDF,EAAcG,aACrE,gDAEF,yBAAKrC,UAAU,mBACb,0BAAMA,UAAU,cAAcmC,EAAcC,OAA5C,MAAuDD,EAAcE,aACrE,iDAGJ,yBAAKrC,UAAU,aACb,yBAAKA,UAAU,yBACb,0BAAMA,UAAU,cAAhB,mCACA,8BAAOwB,EAAkBU,EAAcT,YAEzC,yBAAKzB,UAAU,wBACb,0BAAMA,UAAU,cAAhB,mCACA,8BAAOwB,EAAkBW,EAAcV,aAG3C,yBAAKzB,UAAU,YACb,yBAAKA,UAAU,wBACb,0BAAMA,UAAU,cAAckC,EAAcI,MAAMC,OAAlD,IAA2DjB,EAAKY,EAAcI,MAAMC,SACpF,6BACIL,EAAcI,MAAMC,OAAS,EAC3BL,EAAcI,MAAMlC,KAAI,SAACC,EAAMkB,GAAP,OAAiB,0BAAMjB,IAAKiB,GAAQlB,EAAnB,QACzC,qCAIR,yBAAKL,UAAU,uBACb,0BAAMA,UAAU,cAAcmC,EAAcG,MAAMC,OAAlD,IAA2DjB,EAAKa,EAAcG,MAAMC,SACpF,6BACIJ,EAAcG,MAAMC,OAAS,EAC3BJ,EAAcG,MAAMlC,KAAI,SAACC,EAAMkB,GAAP,OAAiB,0BAAMjB,IAAKiB,GAAQlB,EAAnB,QACzC,0CC3EHmC,ECsGA9C,aAjGS,SAACC,GAAW,IAAD,EACzBC,EAA4FD,EAA5FC,YAAaf,EAA+Ec,EAA/Ed,aAAcE,EAAiEY,EAAjEZ,QAA8BN,EAAmCkB,EAAnClB,SAAUgE,EAAyB9C,EAAzB8C,OAAQxD,EAAiBU,EAAjBV,MAAOyD,EAAU/C,EAAV+C,MAC1F,OAAO,EAAP,CACE9C,cACAf,eACAE,UAEAN,YALF,4BAMEmB,GANF,uBAOE6C,GAPF,sBAQExD,GARF,sBASEyD,GATF,IA+FsC7C,EAAzBH,EAlFK,SAACI,GAAW,IAEtBf,EAAuCe,EAAvCf,QAASa,EAA8BE,EAA9BF,YAAaX,EAAiBa,EAAjBb,MAAOyD,EAAU5C,EAAV4C,MAErC,GAAIzD,EACF,OAAO,kBAAC,EAAD,MAGT,IAAM0D,EAAc,IAAIC,IAAIhD,EAAYQ,KAAI,SAAAC,GAAI,OAAIA,EAAKI,cAEzD,GAAyB,IAArBkC,EAAYE,MAAcF,EAAYG,KAAI,GAC5C,OACE,4MAuBJ,IAAIC,EAAgB,GACdC,EAAiBpD,EAAYqD,MAAM,GACtCC,QAAO,SAAA7C,GAAI,OAAIA,EAAKI,aACpBL,KAAI,SAAAC,GAAI,OAAIA,EAAKiC,SAkCpB,OAlBES,EADEL,EACc3D,EAAQmE,QAAO,SAAA7C,GAC7B,IAAMiC,EAAQjC,EAAK4B,SAAS,GAAGK,MAAMC,OAASlC,EAAK4B,SAAS,GAAGK,MAAMC,OACrE,GAAIS,EAAeG,SAASb,GAAQ,OAAOjC,KAE5C+C,MAAK,SAAC/E,EAAGgF,GAAJ,OAAUhF,EAAE2D,MAAQqB,EAAErB,SAAOiB,MAAM,EAAG,GAE5BlE,EAAQmE,QAAO,SAAA7C,GAC7B,IAAMiC,EAAQjC,EAAK4B,SAAS,GAAGK,MAAMC,OAASlC,EAAK4B,SAAS,GAAGK,MAAMC,OACrE,GAAIS,EAAeG,SAASb,GAAQ,OAAOjC,KAC1C+C,MAAK,SAAC/E,EAAGgF,GAAJ,OAAWhF,EAAE4D,SAAS,GAAGR,SAAWpD,EAAE4D,SAAS,GAAGR,UAAa4B,EAAEpB,SAAS,GAAGR,SAAW4B,EAAEpB,SAAS,GAAGR,aAAWwB,MAAM,EAAG,GAUlI,oCAG6B,IAAzBF,EAAcR,OAAeQ,EAAc3C,KAAI,SAAC0B,EAAQP,GAAT,OAAmB,kBAAC,EAAD,CAAQO,OAAQA,EAAQxB,IAAKiB,OAAa,gTChGrG+B,G,MCEA,WACb,OACE,yBAAKtD,UAAU,yCACb,yBAAKA,UAAU,mBACb,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,8BACA,kC,iBCIFuD,G,6KA8BM,IAAD,EAEgEC,KAAK1D,MAA7D2C,GAFR,EAECxD,MAFD,EAEQwD,QAAiBvD,GAFzB,EAEgBH,QAFhB,EAEyBG,aAAaC,EAFtC,EAEsCA,eAEzCsE,EAAW,gCACXC,EAAW,gCAWf,OAhBO,EAEsDhB,QAK3De,EAAW,gCACXC,EAAW,iCASX,6BACE,yBAAK1D,UAAU,eACb,yBAAKA,UAAU,gBAAgBe,IAAK4C,IAAMxC,IAAI,MAEhD,yBAAKnB,UAAU,UACb,yBAAKA,UAAU,SACb,kBAAC,EAAD,OAEF,yBAAKA,UAAU,SACb,yBAAKA,UAAU,qBACb,4BAAQpB,KAAK,SAASwC,QAASlC,EAAac,UAAWyD,GAAvD,6EAGA,4BAAQ7E,KAAK,SAASwC,QAASjC,EAAgBa,UAAW0D,GAA1D,8EAKAjB,EAAS,kBAAC,EAAD,MAAa,kBAAC,EAAD,a,GAjElBmB,IAAMC,YCrBTN,ED+FA7D,aArFS,SAACC,GAEvB,MAAO,CACLZ,QAFkDY,EAA5CZ,QAGNE,MAHkDU,EAAnCV,MAIfwD,OAJkD9C,EAA5B8C,OAKtBhE,SALkDkB,EAApBlB,SAM9BiE,MANkD/C,EAAV+C,SAoFJ7C,EAAzBH,CAAkC6D,G,cEsClCO,EAvIC,WAkBV,IAjBJnE,EAiBG,uDAjBK,CACNC,YAAa,CACX,CAAEc,GAAI,EAAGH,KAAM,YAAaM,MAAO,qBAAOJ,WAAW,GACrD,CAAEC,GAAI,EAAGH,KAAM,UAAW+B,MAAO,EAAGzB,MAAO,4EAAiBJ,WAAW,GACvE,CAAEC,GAAI,EAAGH,KAAM,WAAY+B,MAAO,EAAGzB,MAAO,2DAAeJ,WAAW,GACtE,CAAEC,GAAI,EAAGH,KAAM,WAAY+B,MAAO,EAAGzB,MAAO,2DAAeJ,WAAW,GACtE,CAAEC,GAAI,EAAGH,KAAM,aAAc+B,MAAO,EAAGzB,MAAO,2DAAeJ,WAAW,IAE1EsC,cAAe,GACfhE,QAAS,GACTC,MAAM,EACNC,OAAO,EACPwD,QAAQ,EACRhE,SAAU,KACViE,OAAO,GAETqB,EACG,uCACH,OAAQA,EAAOnF,MACb,IAAK,gBACH,OAAO,2BAAKe,GAAZ,IAAmBlB,SAAUsF,EAAOtF,WAEtC,IAAK,wBACH,MAAO,CAAEmB,YAAaD,EAAMC,YAAamD,cAAepD,EAAMoD,cAAehE,QAASY,EAAMZ,QAASC,KAAMW,EAAMX,KAAMC,OAAO,EAAOwD,QAAQ,EAAMhE,SAAUkB,EAAMlB,SAAUiE,MAAO/C,EAAM+C,OAE5L,IAAK,wBAEH,MAAO,CAAE9C,YAAaD,EAAMC,YAAamD,cAAepD,EAAMoD,cAAehE,QAAQ,GAAD,mBAAMY,EAAMZ,SAAZ,YAAwBgF,EAAOhF,UAAUC,KAAM+E,EAAO/E,KAAMC,OAAO,EAAOwD,QAAQ,EAAOhE,SAAUkB,EAAMlB,SAAUiE,MAAO/C,EAAM+C,OAEtN,IAAK,wBAEH,OAAO,2BAAK/C,GAAZ,IAAmBV,OAAO,EAAMwD,QAAQ,IAgB1C,IAAK,gBAEH,OADA/D,QAAQC,IAAI,oCAAqCoF,EAAOC,SACjD,2BAAKrE,GAAZ,IAAmB+C,OAAO,IAG5B,IAAK,mBAEH,OADAhE,QAAQC,IAAI,uCAAwCoF,EAAOC,SACpD,2BAAKrE,GAAZ,IAAmB+C,OAAO,IAwB5B,IAAK,oBAAsB,IACjB9C,EAAgBD,EAAhBC,YACAa,EAAcb,EAAY,GAA1Ba,UACFwD,EAAiBrE,EAAYQ,KAAI,SAAAC,GAAI,kCAASA,GAAT,IAAeI,WAAYA,OACtE,OAAO,2BAAKd,GAAZ,IAAmBC,YAAaqE,IAGlC,IAAK,+BAAiC,IAC5BrE,EAAgBD,EAAhBC,YACFP,EAAUO,EAAY,GACtBsE,EAAU,2BAAQ7E,GAAR,IAAiBoB,WAAYpB,EAAQoB,YAC/CwD,EAAc,CAAIrE,EAAY,GAAIsE,GAApB,mBAAmCtE,EAAYqD,MAAM,KACnEkB,EAAa,IAAIvB,IAAIqB,EAAehB,MAAM,GAAG7C,KAAI,SAAAC,GAAI,OAAIA,EAAKI,cACpE,OAA4B,IAApB0D,EAAWtB,MAAcsB,EAAWrB,KAAI,GAAzC,YAAC,eACDnD,GADA,IACOC,YAAY,CAAD,2BAAQA,EAAY,IAApB,IAAwBa,WAAW,IAAOyD,GAA1C,mBAAyDtE,EAAYqD,MAAM,OAD7F,YAAC,eAEDtD,GAFA,IAEOC,YAAY,CAAD,2BAAQA,EAAY,IAApB,IAAwBa,WAAW,IAAQyD,GAA3C,mBAA0DtE,EAAYqD,MAAM,OAGvG,IAAK,gCAAkC,IAC7BrD,EAAgBD,EAAhBC,YACFN,EAAWM,EAAY,GACvBwE,EAAW,2BAAQ9E,GAAR,IAAkBmB,WAAYnB,EAASmB,YAClDwD,EAAc,sBAAQrE,EAAYqD,MAAM,EAAG,IAA7B,CAAiCmB,GAAjC,YAAiDxE,EAAYqD,MAAM,KACjFkB,EAAa,IAAIvB,IAAIqB,EAAehB,MAAM,GAAG7C,KAAI,SAAAC,GAAI,OAAIA,EAAKI,cACpE,OAA4B,IAApB0D,EAAWtB,MAAcsB,EAAWrB,KAAI,GAAzC,YAAC,eACHnD,GADE,IACKC,YAAY,CAAD,2BAAQA,EAAY,IAApB,IAAwBa,WAAW,KAAnC,mBAA6Cb,EAAYqD,MAAM,EAAG,IAAlE,CAAsEmB,GAAtE,YAAsFxE,EAAYqD,MAAM,OADxH,YAAC,eAEHtD,GAFE,IAEKC,YAAY,CAAD,2BAAQA,EAAY,IAApB,IAAwBa,WAAW,KAAnC,mBAA8Cb,EAAYqD,MAAM,EAAG,IAAnE,CAAuEmB,GAAvE,YAAuFxE,EAAYqD,MAAM,OAGlI,IAAK,gCAAkC,IAC7BrD,EAAgBD,EAAhBC,YACFL,EAAWK,EAAY,GACvByE,EAAW,2BAAQ9E,GAAR,IAAkBkB,WAAYlB,EAASkB,YAClDwD,EAAc,sBAAQrE,EAAYqD,MAAM,EAAG,IAA7B,CAAiCoB,EAAazE,EAAY,KACxEuE,EAAa,IAAIvB,IAAIqB,EAAehB,MAAM,GAAG7C,KAAI,SAAAC,GAAI,OAAIA,EAAKI,cACpE,OAA4B,IAApB0D,EAAWtB,MAAcsB,EAAWrB,KAAI,GAAzC,YAAC,eACHnD,GADE,IACKC,YAAY,CAAD,2BAAQA,EAAY,IAApB,IAAwBa,WAAW,KAAnC,mBAA6Cb,EAAYqD,MAAM,EAAG,IAAlE,CAAsEoB,GAAtE,YAAsFzE,EAAYqD,MAAM,OADxH,YAAC,eAEHtD,GAFE,IAEKC,YAAY,CAAD,2BAAQA,EAAY,IAApB,IAAwBa,WAAW,KAAnC,mBAA8Cb,EAAYqD,MAAM,EAAG,IAAnE,CAAuEoB,GAAvE,YAAuFzE,EAAYqD,MAAM,OAGlI,IAAK,kCAAoC,IAC/BrD,EAAgBD,EAAhBC,YACFJ,EAAaI,EAAY,GACzB0E,EAAa,2BAAQ9E,GAAR,IAAoBiB,WAAYjB,EAAWiB,YACxDwD,EAAc,sBAAQrE,EAAYqD,MAAM,EAAG,IAA7B,CAAiCqB,IAC/CH,EAAa,IAAIvB,IAAIqB,EAAehB,MAAM,GAAG7C,KAAI,SAAAC,GAAI,OAAIA,EAAKI,cACpE,OAA4B,IAApB0D,EAAWtB,MAAcsB,EAAWrB,KAAI,GAAzC,YAAC,eACHnD,GADE,IACKC,YAAY,CAAD,2BAAQA,EAAY,IAApB,IAAwBa,WAAW,KAAnC,mBAA6Cb,EAAYqD,MAAM,EAAG,IAAlE,CAAsEqB,MADtF,YAAC,eAEH3E,GAFE,IAEKC,YAAY,CAAD,2BAAQA,EAAY,IAApB,IAAwBa,WAAW,KAAnC,mBAA8Cb,EAAYqD,MAAM,EAAG,IAAnE,CAAuEqB,MAGhG,QACE,OAAO3E,IC7GP4E,G,MAAQC,YAAYV,EAASW,YAAgBC,OAEnDH,EAAMnG,SAASD,KAEfwG,IAASC,OACP,kBAAC,IAAD,CAAUL,MAAOA,GACf,kBAAC,EAAD,OAEFM,SAASC,eAAe,W","file":"static/js/main.de4e1a59.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/attention.cb284d33.png\";","module.exports = __webpack_public_path__ + \"static/media/logo.0c089234.svg\";","export const fetchSearchId = () => {\r\n  return async (dispatch) => {\r\n    const response = await fetch('https://front-test.beta.aviasales.ru/search');\r\n    const { searchId } = await response.json();\r\n    console.log('searchId in actions', searchId);\r\n    dispatch({\r\n      type: 'GET_SEARCH_ID',\r\n      searchId\r\n    });\r\n    dispatch(fetchTickets(searchId));\r\n  };\r\n};\r\n\r\n/* export const fetchTickets = (searchId) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: 'TICKETS_FETCH_REQUEST' });\r\n    try {\r\n      const response = await fetch(`https://front-test.beta.aviasales.ru/tickets?searchId=${searchId}`);\r\n      const { tickets, stop } = await response.json();\r\n      // console.log('Tickets -> ', tickets);\r\n      dispatch({\r\n        type: 'TICKETS_FETCH_SUCCESS',\r\n        tickets,\r\n        stop\r\n      });\r\n      dispatch(sortByPrice());\r\n    } catch (err) {\r\n      dispatch({ type: 'TICKETS_FETCH_FAILURE' });\r\n      console.error('Возникда ошибки: ', err);\r\n      throw err;\r\n    };\r\n  };\r\n}; */\r\n\r\nexport const fetchTickets = (searchId) => {\r\n  return async (dispatch) => {\r\n    dispatch({ type: 'TICKETS_FETCH_REQUEST' });\r\n    while (true) {\r\n      try {\r\n        const response = await fetch(`https://front-test.beta.aviasales.ru/tickets?searchId=${searchId}`);\r\n        // const { tickets, stop } = await response.json();\r\n        //console.log('Ошибка => ', response.status);\r\n        /* if (response.status === 500) {\r\n          dispatch(fetchTickets(searchId))\r\n        }; */\r\n        const data = await response.json();\r\n        // console.log('Tickets -> ', tickets);\r\n        dispatch({\r\n          type: 'TICKETS_FETCH_SUCCESS',\r\n          tickets: data.tickets,\r\n          stop: data.stop\r\n        });\r\n        /* dispatch(sortByPrice(data.tickets)); */\r\n        if (data.stop) {\r\n          return;\r\n        }\r\n      } catch (err) {\r\n        dispatch({ type: 'TICKETS_FETCH_FAILURE' });\r\n        console.error('Возникда ошибки: ', err);\r\n        throw err;\r\n      };\r\n      \r\n    }\r\n\r\n  };\r\n};\r\n\r\n\r\n\r\n/* Сортировка по цене */\r\nexport const sortByPrice = (tickets) => {\r\n  console.log('Click action SortByPrice');\r\n  /* const sortedTickets = tickets.sort((a, b) => a.price - b.price).slice(0, 5); */\r\n  return {\r\n    type: 'SORT_BY_PRICE',\r\n  /*   payload: sortedTickets */\r\n  }\r\n};\r\n\r\n/* Сортировка по времени в пути */\r\nexport const sortByDuration = (tickets) => {\r\n  console.log('Click action SortByDuration');\r\n  /* const sortedTickets = tickets.sort((a, b) => (a.segments[0].duration + a.segments[1].duration) - (b.segments[0].duration + b.segments[1].duration)).slice(0, 5); */\r\n  return {\r\n    type: 'SORT_BY_DURATION',\r\n    /* payload: sortedTickets */\r\n  }\r\n};\r\n\r\n\r\n/* Реакция на фильтры */\r\n\r\n/* export const filteredTicketsList = () => {\r\n  \r\n  console.log('Вызван');\r\n\r\n  return { type: 'FILTERED_TICKETS_LIST' };\r\n}; */\r\n\r\n\r\n\r\n\r\nexport const allRoutes = () => {\r\n  /* const value = event.target.value;\r\n  console.log('value ', value); */\r\n  return { type: 'SELECT_ALL_ROUTES' };\r\n};\r\n\r\nexport const noStops = () => ({\r\n  type: 'SELECT_TICKETS_WITHOUT_STOPS'\r\n});\r\n\r\nexport const oneStops = () => ({\r\n  type: 'SELECT_TICKETS_WITH_ONE_STOPS'\r\n});\r\n\r\n\r\nexport const twoStops = () => ({\r\n  type: 'SELECT_TICKETS_WITH_TWO_STOPS'\r\n});\r\n\r\nexport const threeStops = () => ({\r\n  type: 'SELECT_TICKETS_WITH_THREE_STOPS'\r\n});\r\n\r\n\r\n\r\n\r\n","import Filter from './Filter';\r\n\r\nexport default Filter;","import React from \"react\";\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\n\nimport \"./Filter.scss\";\n\nconst mapStateToProps = (state) => {\n  const { filterStops } = state;\n  return {\n    filterStops\n  };\n};\n\nconst Filter = (props) => {\n\n  const { filterStops, filteredTicketsList, ...actions } = props;\n  // console.log('filterStops - ', filterStops);\n\n  return (\n    <div className=\"col1\">\n      <h6 style={{ fontSize: '12px', textAlign: 'center' }}>КОЛИЧЕСТВО ПЕРЕСАДОК</h6>\n      <form className=\"form\">\n        {\n          filterStops.map(item => {\n            /* console.log(item.name); */\n            return (\n              <div key={item.name}>\n                <input type=\"checkbox\"\n                    checked={item.isChecked}\n                    name={item.name}\n                    id={item.id}\n                    onChange={actions[item.name]}\n                     />\n                  <label htmlFor={item.id}>{item.title}</label>\n              </div>\n            )})\n        }\n      </form>\n    </div>\n  );\n};\n\nexport default connect(mapStateToProps, actions)(Filter);","import ErrorIndicator from './ErrorIndicator';\r\n\r\nexport default ErrorIndicator;","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { fetchTickets } from '../../actions';\r\n\r\nimport attention from '../../images/attention.png';\r\n\r\nimport './ErrorIndicator.scss';\r\n\r\nconst mapStateToProps = (state) => {\r\n  const { searchId } = state;\r\n  return { searchId };\r\n};\r\n\r\nconst ErrorIndicator = (props) => {\r\n  const { searchId , fetchTickets } = props;\r\n  return (\r\n    <div className=\"card classErrorMessage\">\r\n      <div className=\"card-screen\">\r\n        <div className=\"card-body\" style={{ textAlign: 'center' }}>\r\n          <img className=\"card-img-top\" src={attention} style={{ width: 50, margin: '10px auto'}} alt=\"Error message\" />\r\n          <h2>Что-то пошло не так.</h2>\r\n          <p>Продолжить поиск?</p>\r\n          <button type='button' onClick={() => fetchTickets(searchId)} className='btn btn-warning btn-sm'>Продолжить</button>\r\n        </div>\r\n      </div>\r\n      <div className=\"myShadow1\"></div>\r\n      <div className=\"myShadow2\"></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default connect(mapStateToProps, { fetchTickets })(ErrorIndicator);","import Ticket from './Ticket';\r\n\r\nexport default Ticket;","import React from \"react\";\n\nimport \"./Ticket.scss\";\n\nconst Ticket = (props) => {\n\n  const word = (index) => {\n    if (index === 0) {\n      return 'пересадок';\n    } else if (index === 1) {\n      return 'пересадка';\n    } else {\n      return 'пересадки';\n    }\n  }\n\n  const transformDuration = (duration) => {\n    let hour = Math.floor(duration / 60);\n    if (hour < 10) hour = `0${hour}`;\n    let min = duration - hour * 60;\n    if (min < 10) min = `0${min}`;\n    return `${hour}ч ${min}м`;\n  }\n \n\n  const { ticket } = props;\n  // console.log('ticket in TicketForm = ', ticket);\n\n  const { carrier, price, segments } = ticket;\n\n  const [ segmentOneWay, segmentToBack ] = segments;\n  \n  // console.log('segmentOneWay -> ', segmentOneWay);\n  // console.log('segmentToBack -> ', segmentToBack);\n\n  return (\n    <div className=\"ticket-card\">\n      <div className=\"ticket-card--header\">\n        <span>{price} P</span>\n        <img src={`//pics.avs.io/99/36/${carrier}.png`} alt=\"S7 logo\" />\n      </div>\n      <div className=\"information\">\n        <div className=\"rout\">\n          <div className=\"rout-there f-dir\">\n            <span className=\"title-mark\">{segmentOneWay.origin} - {segmentOneWay.destination}</span>\n            <span>10:45 - 08:00</span>\n          </div>\n          <div className=\"rout-back f-dir\">\n            <span className=\"title-mark\">{segmentToBack.origin} - {segmentToBack.destination}</span>\n            <span>11:20 - 00:50</span>\n          </div>\n        </div>\n        <div className=\"intransit\">\n          <div className=\"intransit-there f-dir\">\n            <span className=\"title-mark\">В пути</span>\n            <span>{transformDuration(segmentOneWay.duration)}</span>\n          </div>\n          <div className=\"intransit-back f-dir\">\n            <span className=\"title-mark\">В пути</span>\n            <span>{transformDuration(segmentToBack.duration)}</span>\n          </div>\n        </div>\n        <div className=\"transfer\">\n          <div className=\"transfer-there f-dir\">\n            <span className=\"title-mark\">{segmentOneWay.stops.length} {word(segmentOneWay.stops.length)}</span>\n            <div>\n              { segmentOneWay.stops.length > 0\n                ? segmentOneWay.stops.map((item, index) => <span key={index}>{item} </span>)\n                : <span>-</span>  \n              }\n            </div>\n          </div>\n          <div className=\"transfer-back f-dir\">\n            <span className=\"title-mark\">{segmentToBack.stops.length} {word(segmentToBack.stops.length)}</span>\n            <div>\n              { segmentToBack.stops.length > 0\n                ? segmentToBack.stops.map((item, index) => <span key={index}>{item} </span>)\n                : <span>-</span>  \n              }\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Ticket;\n","import TicketsList from './TicketsList';\r\n\r\nexport default TicketsList;","import React from \"react\";\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\n\nimport ErrorIndicator from '../ErrorIndicator';\nimport Ticket from '../Ticket';\n\nconst mapStateToProps = (state) => {\n  const { filterStops, fetchTickets, tickets, /* sortedTickets, */ searchId, loader, error, cheap } = state;\n  return {\n    filterStops,\n    fetchTickets,\n    tickets,\n    /* sortedTickets, */\n    searchId,\n    filterStops,\n    loader,\n    error,\n    cheap,\n  }\n};\n\nconst TicketsList = (props) => {\n\n  const { tickets, filterStops, error, cheap } = props;\n\n  if (error) {\n    return <ErrorIndicator />\n  }\n\n  const checkedList = new Set(filterStops.map(item => item.isChecked));\n  \n  if (checkedList.size === 1 && checkedList.has(false)) {\n    return (\n      <h2>Не указано количество пересадок!</h2>\n    );\n  };\n\n  \n  /* Сортировка по цене */\n  /* case 'SORT_BY_PRICE': {\n    \n    const { tickets } = state;\n    const sortedTickets = tickets.sort((a, b) => a.price - b.price).slice(0, 5);\n    console.log('sortedTickets by Price in reducer', sortedTickets);\n    return { ...state, sortedTickets: sortedTickets };\n  } */\n\n  /* Сортировка по времени в пути */\n  /* case 'SORT_BY_DURATION': {\n    \n    const { tickets } = state;\n    const sortedTickets = tickets.sort((a, b) => (a.segments[0].duration + a.segments[1].duration) - (b.segments[0].duration + b.segments[1].duration)).slice(0, 5);\n    console.log('sortedTickets by Duration in reducer', sortedTickets);\n    return { ...state, sortedTickets: sortedTickets };\n  } */\n\n  let sortedTickets = [];\n  const checkedFilters = filterStops.slice(1)\n    .filter(item => item.isChecked)\n    .map(item => item.stops);\n  /* console.log('filterStops: ', filterStops); */\n  // console.log('checkedFilters: ', checkedFilters);\n\n  /* if (cheap) {\n    sortedTickets = tickets.filter(item => {\n      const stops = item.segments[0].stops.length + item.segments[1].stops.length;\n      if (checkedFilters.includes(stops)) return item;\n    })    \n    .sort((a, b) => a.price - b.price).slice(0, 5);\n  } else {\n    sortedTickets = tickets.sort((a, b) => (a.segments[0].duration + a.segments[1].duration) - (b.segments[0].duration + b.segments[1].duration)).slice(0, 5);\n  }\n */\n\n  if (cheap) {\n    sortedTickets = tickets.filter(item => {\n      const stops = item.segments[0].stops.length + item.segments[1].stops.length;\n      if (checkedFilters.includes(stops)) return item;\n    })\n    .sort((a, b) => a.price - b.price).slice(0, 5);\n  } else {\n    sortedTickets = tickets.filter(item => {\n      const stops = item.segments[0].stops.length + item.segments[1].stops.length;\n      if (checkedFilters.includes(stops)) return item;\n    }).sort((a, b) => (a.segments[0].duration + a.segments[1].duration) - (b.segments[0].duration + b.segments[1].duration)).slice(0, 5);\n  }\n  \n\n\n\n\n  // console.log('sortedTickets in TicketsList: ', sortedTickets);\n\n  return (\n    <>\n      {\n        /* sortTickets.map((ticket, index) => <TicketForm ticket={ticket} key={index} />) */\n        sortedTickets.length !== 0 ? sortedTickets.map((ticket, index) => <Ticket ticket={ticket} key={index} />) : <h2>Рейсов, подходящих под заданные фильтры, не найдено~!</h2>\n      }\n    </>\n  );\n};\n\nexport default connect(mapStateToProps, actions)(TicketsList);\n","import Spiner from './Spiner';\r\n\r\nexport default Spiner;","import React from 'react';\r\n\r\nimport './Spiner.scss';\r\n\r\nconst Spiner = () => {\r\n  return (\r\n    <div className=\"loadingio-spinner-spinner-5wj8y9evdvn\">\r\n      <div className=\"ldio-jrp5avnkwr\">\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n        <div />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Spiner;","import React from \"react\";\nimport { connect } from 'react-redux';\nimport * as actions from '../../actions';\n\nimport Filter from '../Filter';\nimport TicketsList from '../TicketsList';\n// import ErrorIndicator from '../ErrorIndicator';\nimport Spiner from '../Spiner';\n\nimport logo from \"../../images/logo.svg\";\nimport \"./App.scss\";\n\nconst mapStateToProps = (state) => {\n  const { tickets, error, loader, searchId, cheap } = state;\n  return {\n    tickets,\n    error,\n    loader,\n    searchId,\n    cheap\n  }\n};\n\nclass App extends React.Component {\n  \n  \n/*   sortByPrice = () => {\n    const sortTickets = this.state.data.tickets.sort(function (a, b) {\n      return a.price - b.price;\n    });\n    this.setState({\n      sortTickets,\n      sortButtonsClass: {\n        cheap: 'btn btn-primary btn-lg btn-my',\n        quick: 'btn btn-default btn-lg btn-my'\n      }\n    });\n  } */\n\n/*   sortByDuration = () => {\n    const sortTickets = this.state.data.tickets.sort(function (a, b) {\n      return (a.segments[0].duration + a.segments[1].duration) - (b.segments[0].duration + b.segments[1].duration);\n    });\n    this.setState({\n      sortTickets,\n      sortButtonsClass: {\n        cheap: 'btn btn-default btn-lg btn-my',\n        quick: 'btn btn-primary btn-lg btn-my'\n      }\n    });\n  } */\n\n\n  render() {\n    \n    const { error, loader, tickets, sortByPrice, sortByDuration, cheap } = this.props;\n    /* const { sortByPrice } = actions; */\n    let btnCheap = \"btn btn-primary btn-lg btn-my\";\n    let btnQuick = \"btn btn-default btn-lg btn-my\";\n    if (!cheap) {\n      btnCheap = \"btn btn-default btn-lg btn-my\";\n      btnQuick = \"btn btn-primary btn-lg btn-my\";\n    }\n    \n\n    /* if (error) {\n      return <ErrorIndicator />\n    } */\n\n    return (\n      <div>\n        <div className=\"center-logo\">\n          <img className=\"logo-position\" src={logo} alt=\"\" />\n        </div>\n        <div className=\"my-box\">\n          <div className=\"col_1\">\n            <Filter />\n          </div>\n          <div className=\"col_2\">\n            <div className=\"btn-group buttons\">\n              <button type=\"button\" onClick={sortByPrice} className={btnCheap}>\n                Самый дешевый\n              </button>\n              <button type=\"button\" onClick={sortByDuration} className={btnQuick}>\n                Самый быстрый\n              </button>\n            </div>\n            {\n              loader ? <Spiner /> : <TicketsList />\n            }\n          </div>\n        </div>\n      </div>\n    );\n  }\n};\n\nexport default connect(mapStateToProps, actions)(App);\n","import App from './App';\r\n\r\nexport default App;","const reducer = (\r\n  state = {\r\n    filterStops: [\r\n      { id: 1, name: 'allRoutes', title: 'Все', isChecked: true },\r\n      { id: 2, name: 'noStops', stops: 0, title: 'Без пересадок', isChecked: true },\r\n      { id: 3, name: 'oneStops', stops: 1, title: '1 пересадка', isChecked: true },\r\n      { id: 4, name: 'twoStops', stops: 2, title: '2 пересадки', isChecked: true },\r\n      { id: 5, name: 'threeStops', stops: 3, title: '3 пересадки', isChecked: true },    \r\n    ],\r\n    sortedTickets: [],\r\n    tickets: [],\r\n    stop: false,\r\n    error: false,\r\n    loader: false,\r\n    searchId: null,\r\n    cheap: true\r\n  },\r\n  action\r\n) => {\r\n  switch (action.type) {\r\n    case 'GET_SEARCH_ID':\r\n      return { ...state, searchId: action.searchId }\r\n    \r\n    case 'TICKETS_FETCH_REQUEST':\r\n      return { filterStops: state.filterStops, sortedTickets: state.sortedTickets, tickets: state.tickets, stop: state.stop, error: false, loader: true, searchId: state.searchId, cheap: state.cheap }\r\n    \r\n    case 'TICKETS_FETCH_SUCCESS':\r\n      // console.log('Tickets in Success of reducer: ', state.tickets);\r\n      return { filterStops: state.filterStops, sortedTickets: state.sortedTickets, tickets: [...state.tickets, ...action.tickets], stop: action.stop, error: false, loader: false, searchId: state.searchId, cheap: state.cheap };\r\n    \r\n    case 'TICKETS_FETCH_FAILURE':\r\n      /* return { tickets: [...state.tickets], stop: state.stop, error: true, loader: false, searchId: state.searchId }; */\r\n      return { ...state, error: true, loader: false };\r\n    \r\n    /* Сортировка по цене */\r\n    /* case 'SORT_BY_PRICE':\r\n      console.log('sortedTickets by Price in reducer', action.payload);\r\n      return { ...state, sortedTickets: action.payload, cheap: true };\r\n */\r\n    /* Сортировка по времени в пути */\r\n    /* case 'SORT_BY_DURATION': {\r\n      console.log('sortedTickets by Duration in reducer', action.payload);\r\n      return { ...state, sortedTickets: action.payload, cheap: false };\r\n    } */\r\n\r\n\r\n\r\n    /* Сортировка по цене */\r\n    case 'SORT_BY_PRICE':\r\n      console.log('sortedTickets by Price in reducer', action.payload);\r\n      return { ...state, cheap: true };\r\n\r\n    /* Сортировка по времени в пути */\r\n    case 'SORT_BY_DURATION':\r\n      console.log('sortedTickets by Duration in reducer', action.payload);\r\n      return { ...state, cheap: false };\r\n\r\n\r\n\r\n\r\n    /* case 'FILTERED_TICKETS_LIST': {\r\n      const { filterStops, tickets } = state;\r\n      const checkedFilters = filterStops.filter(item => item.isChecked === 'true');\r\n      let newTicketsArr = [];\r\n      for (let i = 0; i < tickets.length; i += 1) {\r\n        for (let j = 0; j < checkedFilters.length; j += 1) {\r\n          let sumStops = tickets[i].segments[0].stops.length + tickets[i].segments[1].stops.length;\r\n          if (sumStops === checkedFilters[j].stops) {\r\n            newTicketsArr = newTicketsArr.push(tickets[i]);\r\n          }\r\n        }\r\n      }\r\n      \r\n\r\n      console.log('Work Filtered Tickets List: ', checkedFilters);\r\n    } */\r\n\r\n    /* Изменение фильтров  */\r\n    \r\n    case 'SELECT_ALL_ROUTES': {\r\n      const { filterStops } = state;\r\n      const { isChecked } = filterStops[0];\r\n      const newFilterStops = filterStops.map(item => ({...item, isChecked: !isChecked}));\r\n      return { ...state, filterStops: newFilterStops };\r\n    }\r\n    \r\n    case 'SELECT_TICKETS_WITHOUT_STOPS': {\r\n      const { filterStops } = state;\r\n      const noStops = filterStops[1];\r\n      const newNoStops = { ...noStops, isChecked: !noStops.isChecked};\r\n      const newFilterStops = [filterStops[0], newNoStops, ...filterStops.slice(2)];\r\n      const checkboxes = new Set(newFilterStops.slice(1).map(item => item.isChecked));\r\n      return (checkboxes.size === 1 && checkboxes.has(true)) ? \r\n        { ...state, filterStops: [ {...filterStops[0], isChecked: true}, newNoStops, ...filterStops.slice(2) ] } :\r\n        { ...state, filterStops: [ {...filterStops[0], isChecked: false}, newNoStops, ...filterStops.slice(2) ] };\r\n    }\r\n\r\n    case 'SELECT_TICKETS_WITH_ONE_STOPS': {\r\n      const { filterStops } = state;\r\n      const oneStops = filterStops[2];\r\n      const newOneStops = { ...oneStops, isChecked: !oneStops.isChecked};\r\n      const newFilterStops = [ ...filterStops.slice(0, 2), newOneStops, ...filterStops.slice(3) ];\r\n      const checkboxes = new Set(newFilterStops.slice(1).map(item => item.isChecked));\r\n      return (checkboxes.size === 1 && checkboxes.has(true)) ? \r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: true}, ...filterStops.slice(1, 2), newOneStops, ...filterStops.slice(3) ] } :\r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: false}, ...filterStops.slice(1, 2), newOneStops, ...filterStops.slice(3) ] };\r\n    }\r\n\r\n    case 'SELECT_TICKETS_WITH_TWO_STOPS': {\r\n      const { filterStops } = state;\r\n      const twoStops = filterStops[3];\r\n      const newTwoStops = { ...twoStops, isChecked: !twoStops.isChecked};\r\n      const newFilterStops = [ ...filterStops.slice(0, 3), newTwoStops, filterStops[4] ];\r\n      const checkboxes = new Set(newFilterStops.slice(1).map(item => item.isChecked));\r\n      return (checkboxes.size === 1 && checkboxes.has(true)) ? \r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: true}, ...filterStops.slice(1, 3), newTwoStops, ...filterStops.slice(4) ] } :\r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: false}, ...filterStops.slice(1, 3), newTwoStops, ...filterStops.slice(4) ] };\r\n    }\r\n\r\n    case 'SELECT_TICKETS_WITH_THREE_STOPS': {\r\n      const { filterStops } = state;\r\n      const threeStops = filterStops[4];\r\n      const newThreeStops = { ...threeStops, isChecked: !threeStops.isChecked};\r\n      const newFilterStops = [ ...filterStops.slice(0, 4), newThreeStops ];\r\n      const checkboxes = new Set(newFilterStops.slice(1).map(item => item.isChecked));\r\n      return (checkboxes.size === 1 && checkboxes.has(true)) ? \r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: true}, ...filterStops.slice(1, 4), newThreeStops ] } :\r\n      { ...state, filterStops: [ {...filterStops[0], isChecked: false}, ...filterStops.slice(1, 4), newThreeStops ] };\r\n    }\r\n\r\n    default:\r\n      return state;\r\n  };\r\n};\r\n\r\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { createStore, applyMiddleware } from 'redux';\nimport { Provider } from 'react-redux';\nimport thunk from 'redux-thunk';\n\nimport App from './components/App';\nimport reducer from './reducer';\nimport { fetchSearchId } from './actions';\n\nimport './index.scss';\n\n/* const initialStateFilters = [\n  { id: 1, name: 'allRoutes', title: 'Все', isChecked: true },\n  { id: 2, name: 'noStops', stops: 0, title: 'Без пересадок', isChecked: true },\n  { id: 3, name: 'oneStops', stops: 1, title: '1 пересадка', isChecked: true },\n  { id: 4, name: 'twoStops', stops: 2, title: '2 пересадки', isChecked: true },\n  { id: 5, name: 'threeStops', stops: 3, title: '3 пересадки', isChecked: true },    \n]; */\n\n\n/* const store = createStore(reducer, initialStateFilters); */\nconst store = createStore(reducer, applyMiddleware(thunk));\n\nstore.dispatch(fetchSearchId());\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}