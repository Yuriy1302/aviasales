(this.webpackJsonpaviasales=this.webpackJsonpaviasales||[]).push([[0],{18:function(e,t,a){e.exports=a.p+"static/media/attention.cb284d33.png"},19:function(e,t,a){e.exports=a.p+"static/media/logo.0c089234.svg"},22:function(e,t,a){e.exports=a(40)},33:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"fetchSearchId",(function(){return b})),a.d(n,"fetchTickets",(function(){return f})),a.d(n,"sortByPrice",(function(){return h})),a.d(n,"sortByDuration",(function(){return O})),a.d(n,"allRoutes",(function(){return S})),a.d(n,"noStops",(function(){return j})),a.d(n,"oneStops",(function(){return T})),a.d(n,"twoStops",(function(){return v})),a.d(n,"threeStops",(function(){return k}));var c=a(0),r=a.n(c),s=a(7),i=a.n(s),l=a(4),o=a(3),u=a(16),m=a(21),d=a(6),p=a.n(d),E=a(12),b=function(){return function(){var e=Object(E.a)(p.a.mark((function e(t){var a,n,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://front-test.beta.aviasales.ru/search");case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,c=n.searchId,t({type:"GET_SEARCH_ID",searchId:c}),t(f(c));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},f=function e(t){return function(){var a=Object(E.a)(p.a.mark((function a(n){var c,r;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n({type:"TICKETS_FETCH_REQUEST"});case 1:return a.prev=2,a.next=5,fetch("https://front-test.beta.aviasales.ru/tickets?searchId=".concat(t));case 5:return 500===(c=a.sent).status&&n(e(t)),a.next=10,c.json();case 10:if(r=a.sent,n({type:"TICKETS_FETCH_SUCCESS",tickets:r.tickets,stop:r.stop}),!r.stop){a.next=14;break}return a.abrupt("return");case 14:a.next=21;break;case 16:throw a.prev=16,a.t0=a.catch(2),n({type:"TICKETS_FETCH_FAILURE"}),console.error("\u0412\u043e\u0437\u043d\u0438\u043a\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0438: ",a.t0),a.t0;case 21:a.next=1;break;case 24:case"end":return a.stop()}}),a,null,[[2,16]])})));return function(e){return a.apply(this,arguments)}}()},h=function(){return{type:"SORT_BY_PRICE"}},O=function(){return{type:"SORT_BY_DURATION"}},S=function(){return{type:"SELECT_ALL_ROUTES"}},j=function(){return{type:"SELECT_TICKETS_WITHOUT_STOPS"}},T=function(){return{type:"SELECT_TICKETS_WITH_ONE_STOPS"}},v=function(){return{type:"SELECT_TICKETS_WITH_TWO_STOPS"}},k=function(){return{type:"SELECT_TICKETS_WITH_THREE_STOPS"}},C=(a(33),Object(o.b)((function(e){return{filterStops:e.filterStops}}),n)((function(e){var t=e.filterStops,a=Object(m.a)(e,["filterStops"]);return r.a.createElement("div",{className:"col1"},r.a.createElement("h6",{style:{fontSize:"12px",textAlign:"center"}},"\u041a\u041e\u041b\u0418\u0427\u0415\u0421\u0422\u0412\u041e \u041f\u0415\u0420\u0415\u0421\u0410\u0414\u041e\u041a"),r.a.createElement("form",{className:"form"},t.map((function(e){return r.a.createElement("div",{key:e.name},r.a.createElement("input",{type:"checkbox",checked:e.isChecked,name:e.name,id:e.id,onChange:a[e.name]}),r.a.createElement("label",{htmlFor:e.id},e.title))}))))}))),_=(a(34),function(){return r.a.createElement("div",{className:"loadingio-spinner-spinner-5wj8y9evdvn"},r.a.createElement("div",{className:"ldio-jrp5avnkwr"},r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null),r.a.createElement("div",null)))}),g=a(17),I=a(20),N=(a(36),function(e){var t=e.ticket,a=t.carrier,n=t.price,c=t.segments,s=Object(I.a)(c,2),i=s[0],l=s[1],o=function(e){return 0===e?"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a":1===e?"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430":"\u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"},u=function(e){var t=Math.floor(e/60);t<10&&(t="0".concat(t));var a=e-60*t;return a<10&&(a="0".concat(a)),"".concat(t,"\u0447 ").concat(a,"\u043c")};return r.a.createElement("div",{className:"ticket-card"},r.a.createElement("div",{className:"ticket-card--header"},r.a.createElement("span",null,n," P"),r.a.createElement("img",{src:"//pics.avs.io/99/36/".concat(a,".png"),alt:"Aviacompany ".concat(a)})),r.a.createElement("div",{className:"information"},r.a.createElement("div",{className:"rout"},r.a.createElement("div",{className:"rout-there f-dir"},r.a.createElement("span",{className:"title-mark"},i.origin," - ",i.destination),r.a.createElement("span",null,"10:45 - 08:00")),r.a.createElement("div",{className:"rout-back f-dir"},r.a.createElement("span",{className:"title-mark"},l.origin," - ",l.destination),r.a.createElement("span",null,"11:20 - 00:50"))),r.a.createElement("div",{className:"intransit"},r.a.createElement("div",{className:"intransit-there f-dir"},r.a.createElement("span",{className:"title-mark"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",null,u(i.duration))),r.a.createElement("div",{className:"intransit-back f-dir"},r.a.createElement("span",{className:"title-mark"},"\u0412 \u043f\u0443\u0442\u0438"),r.a.createElement("span",null,u(l.duration)))),r.a.createElement("div",{className:"transfer"},r.a.createElement("div",{className:"transfer-there f-dir"},r.a.createElement("span",{className:"title-mark"},i.stops.length," ",o(i.stops.length)),r.a.createElement("div",null,i.stops.length>0?i.stops.map((function(e){return r.a.createElement("span",{key:e},e," ")})):r.a.createElement("span",null,"-"))),r.a.createElement("div",{className:"transfer-back f-dir"},r.a.createElement("span",{className:"title-mark"},l.stops.length," ",o(l.stops.length)),r.a.createElement("div",null,l.stops.length>0?l.stops.map((function(e){return r.a.createElement("span",{key:e},e," ")})):r.a.createElement("span",null,"-"))))))}),y=a(18),w=a.n(y),R=(a(37),Object(o.b)((function(e){return{searchId:e.searchId}}))((function(e){var t=e.searchId;return r.a.createElement("div",{className:"card classErrorMessage"},r.a.createElement("div",{className:"card-screen"},r.a.createElement("div",{className:"card-body",style:{textAlign:"center"}},r.a.createElement("img",{className:"card-img-top",src:w.a,style:{width:50,margin:"10px auto"},alt:"Error message"}),r.a.createElement("h2",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a."),r.a.createElement("p",null,"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043f\u043e\u0438\u0441\u043a?"),r.a.createElement("button",{type:"button",onClick:function(){return f(t)},className:"btn btn-warning btn-sm"},"\u041f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c"))),r.a.createElement("div",{className:"shadow1"}),r.a.createElement("div",{className:"shadow2"}))}))),x=Object(o.b)((function(e){return{filterStops:e.filterStops,tickets:e.tickets,error:e.error,cheap:e.cheap}}),n)((function(e){var t=e.tickets,a=e.filterStops,n=e.error,c=e.cheap;if(n)return r.a.createElement(R,null);var s=new Set(a.map((function(e){return e.isChecked})));if(1===s.size&&s.has(!1))return r.a.createElement("h2",null,"\u041d\u0435 \u0443\u043a\u0430\u0437\u0430\u043d\u043e \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a!");var i=[],l=a.slice(1).filter((function(e){return e.isChecked})).map((function(e){return e.stops}));return i=c?t.filter((function(e){var t=e.segments[0].stops.length+e.segments[1].stops.length;return l.includes(t)?e:null})).sort((function(e,t){return e.price-t.price})).slice(0,5):t.filter((function(e){var t=e.segments[0].stops.length+e.segments[1].stops.length;return l.includes(t)?e:null})).sort((function(e,t){return e.segments[0].duration+e.segments[1].duration-(t.segments[0].duration+t.segments[1].duration)})).slice(0,5),r.a.createElement(r.a.Fragment,null,0!==i.length?i.map((function(e){return r.a.createElement(N,{ticket:e,key:Object(g.uniqueId)()})})):r.a.createElement("h2",null,"\u0420\u0435\u0439\u0441\u043e\u0432, \u043f\u043e\u0434\u0445\u043e\u0434\u044f\u0449\u0438\u0445 \u043f\u043e\u0434 \u0437\u0430\u0434\u0430\u043d\u043d\u044b\u0435 \u0444\u0438\u043b\u044c\u0442\u0440\u044b, \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e!"))})),H=a(19),L=a.n(H),K=(a(38),Object(o.b)((function(e){return{loader:e.loader,cheap:e.cheap}}),n)((function(e){var t=e.loader,a=e.cheap,n=e.sortByPrice,c=e.sortByDuration,s="btn btn-primary btn-lg btn-my",i="btn btn-default btn-lg btn-my";return a||(s="btn btn-default btn-lg btn-my",i="btn btn-primary btn-lg btn-my"),r.a.createElement("div",null,r.a.createElement("header",{className:"center-logo"},r.a.createElement("img",{className:"logo-position",src:L.a,alt:"Aviasales logo"})),r.a.createElement("main",{className:"my-box"},r.a.createElement("div",{className:"col_1"},r.a.createElement(C,null)),r.a.createElement("div",{className:"col_2"},r.a.createElement("div",{className:"btn-group buttons"},r.a.createElement("button",{type:"button",onClick:n,className:s},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"),r.a.createElement("button",{type:"button",onClick:c,className:i},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439")),t?r.a.createElement(_,null):r.a.createElement(x,null))))}))),P=a(2),A=a(1),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filterStops:[{id:1,name:"allRoutes",title:"\u0412\u0441\u0435",isChecked:!0},{id:2,name:"noStops",stops:0,title:"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a",isChecked:!0},{id:3,name:"oneStops",stops:1,title:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",isChecked:!0},{id:4,name:"twoStops",stops:2,title:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",isChecked:!0},{id:5,name:"threeStops",stops:3,title:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",isChecked:!0}],sortedTickets:[],tickets:[],stop:!1,error:!1,loader:!1,searchId:null,cheap:!0},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_SEARCH_ID":return Object(A.a)(Object(A.a)({},e),{},{searchId:t.searchId});case"TICKETS_FETCH_REQUEST":return{filterStops:e.filterStops,sortedTickets:e.sortedTickets,tickets:e.tickets,stop:e.stop,error:!1,loader:!0,searchId:e.searchId,cheap:e.cheap};case"TICKETS_FETCH_SUCCESS":return{filterStops:e.filterStops,sortedTickets:e.sortedTickets,tickets:[].concat(Object(P.a)(e.tickets),Object(P.a)(t.tickets)),stop:t.stop,error:!1,loader:!1,searchId:e.searchId,cheap:e.cheap};case"TICKETS_FETCH_FAILURE":return Object(A.a)(Object(A.a)({},e),{},{error:!0,loader:!1});case"SORT_BY_PRICE":return Object(A.a)(Object(A.a)({},e),{},{cheap:!0});case"SORT_BY_DURATION":return Object(A.a)(Object(A.a)({},e),{},{cheap:!1});case"SELECT_ALL_ROUTES":var a=e.filterStops,n=a[0].isChecked,c=a.map((function(e){return Object(A.a)(Object(A.a)({},e),{},{isChecked:!n})}));return Object(A.a)(Object(A.a)({},e),{},{filterStops:c});case"SELECT_TICKETS_WITHOUT_STOPS":var r=e.filterStops,s=r[1],i=Object(A.a)(Object(A.a)({},s),{},{isChecked:!s.isChecked}),l=[r[0],i].concat(Object(P.a)(r.slice(2))),o=new Set(l.slice(1).map((function(e){return e.isChecked})));return 1===o.size&&o.has(!0)?Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},r[0]),{},{isChecked:!0}),i].concat(Object(P.a)(r.slice(2)))}):Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},r[0]),{},{isChecked:!1}),i].concat(Object(P.a)(r.slice(2)))});case"SELECT_TICKETS_WITH_ONE_STOPS":var u=e.filterStops,m=u[2],d=Object(A.a)(Object(A.a)({},m),{},{isChecked:!m.isChecked}),p=[].concat(Object(P.a)(u.slice(0,2)),[d],Object(P.a)(u.slice(3))),E=new Set(p.slice(1).map((function(e){return e.isChecked})));return 1===E.size&&E.has(!0)?Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},u[0]),{},{isChecked:!0})].concat(Object(P.a)(u.slice(1,2)),[d],Object(P.a)(u.slice(3)))}):Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},u[0]),{},{isChecked:!1})].concat(Object(P.a)(u.slice(1,2)),[d],Object(P.a)(u.slice(3)))});case"SELECT_TICKETS_WITH_TWO_STOPS":var b=e.filterStops,f=b[3],h=Object(A.a)(Object(A.a)({},f),{},{isChecked:!f.isChecked}),O=[].concat(Object(P.a)(b.slice(0,3)),[h,b[4]]),S=new Set(O.slice(1).map((function(e){return e.isChecked})));return 1===S.size&&S.has(!0)?Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},b[0]),{},{isChecked:!0})].concat(Object(P.a)(b.slice(1,3)),[h],Object(P.a)(b.slice(4)))}):Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},b[0]),{},{isChecked:!1})].concat(Object(P.a)(b.slice(1,3)),[h],Object(P.a)(b.slice(4)))});case"SELECT_TICKETS_WITH_THREE_STOPS":var j=e.filterStops,T=j[4],v=Object(A.a)(Object(A.a)({},T),{},{isChecked:!T.isChecked}),k=[].concat(Object(P.a)(j.slice(0,4)),[v]),C=new Set(k.slice(1).map((function(e){return e.isChecked})));return 1===C.size&&C.has(!0)?Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},j[0]),{},{isChecked:!0})].concat(Object(P.a)(j.slice(1,4)),[v])}):Object(A.a)(Object(A.a)({},e),{},{filterStops:[Object(A.a)(Object(A.a)({},j[0]),{},{isChecked:!1})].concat(Object(P.a)(j.slice(1,4)),[v])});default:return e}},F=(a(39),Object(l.c)(U,Object(l.a)(u.a)));F.dispatch(b()),i.a.render(r.a.createElement(o.a,{store:F},r.a.createElement(K,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.cb3474f4.chunk.js.map